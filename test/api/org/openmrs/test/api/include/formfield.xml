<?xml version='1.0' encoding='UTF-8'?>
<dataset>
  <form_field form_field_id="2" form_id="1" field_id="2" field_number="1" field_part="" required="false" changed_by="1" date_changed="2006-07-18 11:11:53.0" creator="1" date_created="2006-07-18 11:04:36.0" sort_weight="10.0"/>
  <form_field form_field_id="3" form_id="1" field_id="3" field_number="2" field_part="" required="false" changed_by="1" date_changed="2006-07-18 11:12:05.0" creator="1" date_created="2006-07-18 11:06:52.0" sort_weight="20.0"/>
  <form_field form_field_id="5" form_id="1" field_id="5" field_number="3" field_part="" required="false" changed_by="1" date_changed="2006-07-18 11:13:59.0" creator="1" date_created="2006-07-18 11:13:57.0" sort_weight="30.0"/>
  <field field_id="1" name="SELF PAY" description="Patient pays for their own evaluation and related treatment.  Used as an answer for &quot;pay category&quot;." field_type="1" concept_id="5269" table_name="" default_value="" select_multiple="false" creator="1" date_created="2006-07-18 11:03:31.0"/>
  <field field_id="2" name="PATIENT" description="Patient section of form" field_type="5" table_name="" attribute_name="" default_value="" select_multiple="false" creator="1" date_created="2006-07-18 11:04:36.0"/>
  <field field_id="3" name="ENCOUNTER" description="Encounter section of form" field_type="5" table_name="" attribute_name="" default_value="" select_multiple="false" creator="1" date_created="2006-07-18 11:06:52.0"/>
  <form form_id="1" name="Basic Form" version="0.1" build="0" published="0" description="This form contains only the common/core elements needed for most forms" xslt="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!--
OpenMRS FormEntry Form HL7 Translation

This XSLT is used to translate OpenMRS forms from XML into HL7 2.5 format

@author Burke Mamlin, MD
@author Ben Wolfe
@version 1.9.4

1.9.4 - add support for message uid (as HL7 control id) and transform of patient.health_center to Discharge to Location (PV1-37)
1.9.3 - fixed rounding error on timestamp (tenths of seconds getting rounded up, causing &quot;60&quot; seconds in some cases) 
1.9.2 - first generally useful version
--&gt;

&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot; xmlns:xdt=&quot;http://www.w3.org/2005/xpath-datatypes&quot;&gt;
	&lt;xsl:output method=&quot;text&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;no&quot;/&gt;

&lt;xsl:variable name=&quot;SENDING-APPLICATION&quot;&gt;FORMENTRY&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;SENDING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-APPLICATION&quot;&gt;HL7LISTENER&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;PATIENT-AUTHORITY&quot;&gt;&lt;/xsl:variable&gt; &lt;!-- leave blank for internal id, max 20 characters --&gt;
                                                       &lt;!-- for now, must match patient_identifier_type.name --&gt;
&lt;xsl:variable name=&quot;FORM-AUTHORITY&quot;&gt;AMRS.ELD.FORMID&lt;/xsl:variable&gt; &lt;!-- max 20 characters --&gt;

&lt;xsl:template match=&quot;/&quot;&gt;
	&lt;xsl:apply-templates /&gt;
&lt;/xsl:template&gt;

&lt;!-- Form template --&gt;
&lt;xsl:template match=&quot;form&quot;&gt;
	&lt;!-- MSH Header --&gt;
	&lt;xsl:text&gt;MSH|^~\&amp;amp;&lt;/xsl:text&gt;   &lt;!-- Message header, field separator, and encoding characters --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-3 Sending application --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-4 Sending facility --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-5 Receiving application --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-6 Receiving facility --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-7 Date/time message sent --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-8 Security --&gt;
	&lt;xsl:text&gt;|ORU^R01&lt;/xsl:text&gt;       &lt;!-- MSH-9 Message type ^ Event type (observation report unsolicited) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-10 Message control ID --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;header/uid&quot;&gt;
			&lt;xsl:value-of select=&quot;header/uid&quot; /&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;patient/patient.patient_id&quot; /&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|P&lt;/xsl:text&gt;             &lt;!-- MSH-11 Processing ID --&gt;
	&lt;xsl:text&gt;|2.5&lt;/xsl:text&gt;           &lt;!-- MSH-12 HL7 version --&gt;
	&lt;xsl:text&gt;|1&lt;/xsl:text&gt;             &lt;!-- MSH-13 Message sequence number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-14 Continuation Pointer --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-15 Accept Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-16 Application Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-17 Country Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-18 Character Set --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-19 Principal Language of Message --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-20 Alternate Character Set Handling Scheme --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-21 Message Profile Identifier --&gt;
	&lt;xsl:value-of select=&quot;@id&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;
	&lt;xsl:value-of select=&quot;$FORM-AUTHORITY&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;

	&lt;!-- PID header --&gt;
	&lt;xsl:text&gt;PID&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-1 Set ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-2 (deprecated) Patient ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-3 Patient Identifier List --&gt;
	&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
		&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.patient_id&quot; /&gt;
		&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
		&lt;xsl:with-param name=&quot;type&quot; select=&quot;L&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:if test=&quot;patient/patient.previous_mrn and string-length(patient/patient.previous_mrn) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.previous_mrn&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;PRIOR&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;!-- Additional patient identifiers --&gt;
	&lt;!-- This example is for an MTCT-PLUS identifier used in the AMPATH project in Kenya (skipped if not present) --&gt;
	&lt;xsl:if test=&quot;patient/patient.mtctplus_id and string-length(patient/patient.mtctplus_id) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.mtctplus_id&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;MTCTPLUS&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-4 (deprecated) Alternate patient ID --&gt;
	&lt;!-- PID-5 Patient name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- Family name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.family_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Given name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.given_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Middle name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.middle_name&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-6 Mother&apos;s maiden name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-7 Date/Time of Birth --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.date_of_birth&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
	&lt;!-- PV1 header --&gt;
	&lt;xsl:text&gt;PV1&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-1 Sub ID --&gt;
	&lt;xsl:text&gt;|O&lt;/xsl:text&gt;             &lt;!-- PV1-2 Patient class (O = outpatient) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-3 Patient location --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.location_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-4 Admission type (2 = return) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-5 Pre-Admin Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-6 Prior Patient Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-7 Attending Doctor --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.provider_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-8 Referring Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-9 Consulting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-10 Hospital Service --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-11 Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-12 Preadmin Test Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-13 Re-adminssion Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-14 Admit Source --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-15 Ambulatory Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-16 VIP Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-17 Admitting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-18 Patient Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-19 Visit Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-20 Financial Class --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-21 Charge Price Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-22 Courtesy Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-23 Credit Rating --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-24 Contract Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-25 Contract Effective Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-26 Contract Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-27 Contract Period --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-28 Interest Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-29 Transfer to Bad Debt Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-30 Transfer to Bad Debt Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Agency Code --&gt;
  &lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Transfer Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-33 Bad Debt Recovery Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-34 Delete Account Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-35 Delete Account Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-36 Discharge Disposition --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-37 Discharge To Location --&gt;
	&lt;xsl:if test=&quot;patient/patient.health_center&quot;&gt;
		&lt;xsl:value-of select=&quot;replace(patient/patient.health_center,&apos;\^&apos;,&apos;&amp;amp;&apos;)&quot; /&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-38 Diet Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-39 Servicing Facility --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-40 Bed Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-41 Account Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-42 Pending Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-43 Prior Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-44 Admit Date/Time --&gt;
	&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-45 Discharge Date/Time --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-46 Current Patient Balance --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-47 Total Charges --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-48 Total Adjustments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-49 Total Payments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-50 Alternate Visit ID --&gt;
	&lt;xsl:text&gt;|V&lt;/xsl:text&gt;             &lt;!-- PV1-51 Visit Indicator --&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- We use encounter date as the timestamp for each observation --&gt;
	&lt;xsl:variable name=&quot;encounterTimestamp&quot;&gt;
		&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
			&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:variable&gt;
	
	&lt;!-- ORC Common Order Segment --&gt;
	&lt;xsl:text&gt;ORC&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|RE&lt;/xsl:text&gt;            &lt;!-- ORC-1 Order Control (RE = obs to follow) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-2 Placer Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-3 Filler Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-4 Placer Group Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-5 Order Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-6 Response Flag --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-7 Quantity/Timing --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-8 Parent --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-9 Date/Time of Transaction --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:dateTime(header/date_entered)&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-10 Entered By --&gt;
	&lt;xsl:value-of select=&quot;header/enterer&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- Observation(s) --&gt;
	&lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsListCount&quot; select=&quot;count($obsList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;!-- Observation OBR --&gt;
	&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
	&lt;xsl:text&gt;1&lt;/xsl:text&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
	&lt;xsl:value-of select=&quot;obs/@openmrs_concept&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- observation OBXs --&gt;
	&lt;xsl:for-each select=&quot;$obsList&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;value&quot;&gt;
				&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
					&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
					&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
					&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
					&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
				&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat($setId,position())&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:for-each&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:for-each&gt;
	
	&lt;!-- Grouped observation(s) --&gt;
	&lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsGroupListCount&quot; select=&quot;count($obsGroupList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$obsGroupList&quot;&gt;
		&lt;!-- Observation OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + position()&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
		
		&lt;!-- Generate OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;1&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat(&apos;1.&apos;,position())&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;
	&lt;/xsl:for-each&gt;

	&lt;!-- Problem list(s) --&gt;
	&lt;xsl:variable name=&quot;problemList&quot; select=&quot;problem_list/*[value[text() != &apos;&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;problemListCount&quot; select=&quot;count($problemList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:if test=&quot;$problemList&quot;&gt;
		&lt;!-- Problem list OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;problem_list/@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

		&lt;!-- Problem list OBXs --&gt;
		&lt;xsl:for-each select=&quot;$problemList&quot;&gt;
			&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
				&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;&apos;CWE&apos;&quot; /&gt;
				&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
				&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
			&lt;/xsl:call-template&gt;		
		&lt;/xsl:for-each&gt;
	&lt;/xsl:if&gt;
	
	&lt;!-- Orders --&gt;
	&lt;xsl:variable name=&quot;orderList&quot; select=&quot;orders/*[*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]]&quot; /&gt;
	&lt;xsl:variable name=&quot;orderListCount&quot; select=&quot;count($orderList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$orderList&quot;&gt;
		&lt;!-- Order section OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + $problemListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
		&lt;!-- Order OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;position()&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;	
	&lt;/xsl:for-each&gt;
	
&lt;/xsl:template&gt;

&lt;!-- Patient Identifier (CX) generator --&gt;
&lt;xsl:template name=&quot;patient_id&quot;&gt;
	&lt;xsl:param name=&quot;pid&quot; /&gt;
	&lt;xsl:param name=&quot;auth&quot; /&gt;
	&lt;xsl:param name=&quot;type&quot; /&gt;
	&lt;xsl:value-of select=&quot;$pid&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check digit --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check Digit Scheme --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Assigning Authority --&gt;
	&lt;xsl:value-of select=&quot;$auth&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Identifier Type --&gt;
	&lt;xsl:value-of select=&quot;$type&quot; /&gt;
&lt;/xsl:template&gt;

&lt;!-- OBX Generator --&gt;
&lt;xsl:template name=&quot;obsObx&quot;&gt;
	&lt;xsl:param name=&quot;setId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;subId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;datatype&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;concept&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;date&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;time&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;value&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;units&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;encounterTimestamp&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:text&gt;OBX&lt;/xsl:text&gt;                     &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Set ID --&gt;
	&lt;xsl:value-of select=&quot;$setId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation datatype --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:text&gt;NM&lt;/xsl:text&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$datatype&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Concept (what was observed --&gt;
	&lt;xsl:value-of select=&quot;$concept&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Sub-ID --&gt;
	&lt;xsl:value-of select=&quot;$subId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Value --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TS&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;DT&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TM&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Time&quot;&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$value = &apos;0&apos; or upper-case($value) = &apos;FALSE&apos;&quot;&gt;0&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;1&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$value&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Units --&gt;
	&lt;xsl:value-of select=&quot;$units&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Reference range --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Abnormal flags --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Probability --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Nature of abnormal test --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation result status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Effective date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- User defined access checks --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Date time of observation --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$date and $time&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;dateTime($date,$time)&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$date&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$encounterTimestamp&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted timestamp --&gt;
&lt;xsl:template name=&quot;hl7Timestamp&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(year-from-dateTime($date),format-number(month-from-dateTime($date),&apos;00&apos;),format-number(day-from-dateTime($date),&apos;00&apos;),format-number(hours-from-dateTime($date),&apos;00&apos;),format-number(minutes-from-dateTime($date),&apos;00&apos;),format-number(floor(seconds-from-dateTime($date)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted date --&gt;
&lt;xsl:template name=&quot;hl7Date&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;contains(string($date),&apos;T&apos;)&quot;&gt;
				&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:date(substring-before($date,&apos;T&apos;))&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
					&lt;xsl:value-of select=&quot;concat(year-from-date($date),format-number(month-from-date($date),&apos;00&apos;),format-number(day-from-date($date),&apos;00&apos;))&quot; /&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;				
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted time --&gt;
&lt;xsl:template name=&quot;hl7Time&quot;&gt;
	&lt;xsl:param name=&quot;time&quot; /&gt;
	&lt;xsl:if test=&quot;$time != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(format-number(hours-from-time($time),&apos;00&apos;),format-number(minutes-from-time($time),&apos;00&apos;),format-number(floor(seconds-from-time($time)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;" creator="1" date_created="2006-10-01 09:15:13.0" changed_by="1" date_changed="2006-10-01 09:15:22.0" retired="false"/>
  <form form_id="14" name="AMPATH Adult Return Visit Form" version="4.0" build="24" published="0" description="AMPATH Adult Return Visit Form - initial version" encounter_type="2" template="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;?mso-infoPathSolution name=&quot;AMPATH Adult Return Visit Form&quot; href=&quot;https://dev.openmrs.org/amrs/moduleServlet/formentry/forms/14.xsn&quot; solutionVersion=&quot;4.0.0.24&quot; productVersion=&quot;11.0.6357&quot; PIVersion=&quot;1.0.0.0&quot; ?&gt;&lt;?mso-application progid=&quot;InfoPath.Document&quot;?&gt;&lt;form xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xd=&quot;http://schemas.microsoft.com/office/infopath/2003&quot; xmlns:openmrs=&quot;https://dev.openmrs.org/amrs/moduleServlet/formentry/forms/schema/14-24&quot; id=&quot;14&quot; name=&quot;AMPATH Adult Return Visit Form&quot; version=&quot;4.0&quot;&gt;
  &lt;header&gt;
    &lt;enterer&gt;$!{enterer}&lt;/enterer&gt;
    &lt;date_entered&gt;$!{dateEntered}&lt;/date_entered&gt;
    &lt;session&gt;$!{sessionId}&lt;/session&gt;
    &lt;uid&gt;$!{uid}&lt;/uid&gt;
  &lt;/header&gt;
  &lt;all_patient_data&gt;
    &lt;patient.tribe openmrs_attribute=&quot;tribe&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getTribe().getTribeId()}^$!{patient.getTribe().getName()}&lt;/patient.tribe&gt;
    &lt;patient_identifier&gt;
      &lt;patient_identifier.identifier openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.getIdentifier()}&lt;/patient_identifier.identifier&gt;
      &lt;patient_identifier.identifier_type_id openmrs_attribute=&quot;identifier_type_id&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.getIdentifierType().getPatientIdentifierTypeId()}&lt;/patient_identifier.identifier_type_id&gt;
      &lt;patient_identifier.location_id openmrs_attribute=&quot;location_id&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.getLocation().getLocationId()}&lt;/patient_identifier.location_id&gt;
      &lt;patient_identifier.preferred openmrs_attribute=&quot;preferred&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.isPreferred()}&lt;/patient_identifier.preferred&gt;
      &lt;patient_identifier.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.isVoided()}&lt;/patient_identifier.voided&gt;
    &lt;/patient_identifier&gt;
    &lt;person.birthdate openmrs_attribute=&quot;birthdate&quot; openmrs_table=&quot;person&quot;&gt;$!{date.format($patient.getBirthdate())}&lt;/person.birthdate&gt;
    &lt;person.birthdate_estimated openmrs_attribute=&quot;birthdate_estimated&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getBirthDateEstimated()}&lt;/person.birthdate_estimated&gt;
    &lt;person.dead openmrs_attribute=&quot;dead&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getDead()}&lt;/person.dead&gt;
    &lt;person.death_date openmrs_attribute=&quot;death_date&quot; openmrs_table=&quot;person&quot;&gt;$!{date.format($patient.getDeathDate())}&lt;/person.death_date&gt;
    &lt;person.death_reason openmrs_attribute=&quot;death_reason&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getDeathReason().getConceptId()}^$!{patient.getDeathReason().getName()}&lt;/person.death_reason&gt;
    &lt;person.gender openmrs_attribute=&quot;gender&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getGender()}&lt;/person.gender&gt;
    &lt;person_address&gt;
      &lt;person_address.address1 openmrs_attribute=&quot;address1&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getAddress1()}&lt;/person_address.address1&gt;
      &lt;person_address.address2 openmrs_attribute=&quot;address2&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getAddress2()}&lt;/person_address.address2&gt;
      &lt;person_address.city_village openmrs_attribute=&quot;city_village&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getCityVillage()}&lt;/person_address.city_village&gt;
      &lt;person_address.country openmrs_attribute=&quot;country&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getCountry()}&lt;/person_address.country&gt;
      &lt;person_address.county_district openmrs_attribute=&quot;county_district&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getCountyDistrict()}&lt;/person_address.county_district&gt;
      &lt;person_address.latitude openmrs_attribute=&quot;latitude&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getLatitude()}&lt;/person_address.latitude&gt;
      &lt;person_address.longitude openmrs_attribute=&quot;longitude&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getLongitude()}&lt;/person_address.longitude&gt;
      &lt;person_address.neighborhood_cell openmrs_attribute=&quot;neighborhood_cell&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getNeighborhoodCell()}&lt;/person_address.neighborhood_cell&gt;
      &lt;person_address.postal_code openmrs_attribute=&quot;postal_code&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getPostalCode()}&lt;/person_address.postal_code&gt;
      &lt;person_address.preferred openmrs_attribute=&quot;preferred&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.isPreferred()}&lt;/person_address.preferred&gt;
      &lt;person_address.region openmrs_attribute=&quot;region&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getRegion()}&lt;/person_address.region&gt;
      &lt;person_address.state_province openmrs_attribute=&quot;state_province&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getStateProvince()}&lt;/person_address.state_province&gt;
      &lt;person_address.subregion openmrs_attribute=&quot;subregion&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getSubregion()}&lt;/person_address.subregion&gt;
      &lt;person_address.township_division openmrs_attribute=&quot;township_division&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getTownshipDivision()}&lt;/person_address.township_division&gt;
      &lt;person_address.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.isVoided()}&lt;/person_address.voided&gt;
    &lt;/person_address&gt;
    &lt;person_attribute&gt;
      &lt;person_attribute.person_attribute_type_id openmrs_attribute=&quot;person_attribute_type_id&quot; openmrs_table=&quot;person_attribute&quot;&gt;$!{listItem.getAttributeType().getPersonAttributeTypeId()}&lt;/person_attribute.person_attribute_type_id&gt;
      &lt;person_attribute.value openmrs_attribute=&quot;value&quot; openmrs_table=&quot;person_attribute&quot;&gt;$!{listItem.getValue()}&lt;/person_attribute.value&gt;
      &lt;person_attribute.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;person_attribute&quot;&gt;$!{listItem.isVoided()}&lt;/person_attribute.voided&gt;
    &lt;/person_attribute&gt;
    &lt;person_name&gt;
      &lt;person_name.family_name openmrs_attribute=&quot;family_name&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.getFamilyName()}&lt;/person_name.family_name&gt;
      &lt;person_name.given_name openmrs_attribute=&quot;given_name&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.getGivenName()}&lt;/person_name.given_name&gt;
      &lt;person_name.middle_name openmrs_attribute=&quot;middle_name&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.getMiddleName()}&lt;/person_name.middle_name&gt;
      &lt;person_name.preferred openmrs_attribute=&quot;preferred&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.isPreferred()}&lt;/person_name.preferred&gt;
      &lt;person_name.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.isVoided()}&lt;/person_name.voided&gt;
    &lt;/person_name&gt;
  &lt;/all_patient_data&gt;
  &lt;patient&gt;
    &lt;patient.family_name openmrs_attribute=&quot;family_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getFamilyName()}&lt;/patient.family_name&gt;
    &lt;patient.given_name openmrs_attribute=&quot;given_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getGivenName()}&lt;/patient.given_name&gt;
    &lt;patient.medical_record_number openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier(3).getIdentifier()}&lt;/patient.medical_record_number&gt;
    &lt;patient.middle_name openmrs_attribute=&quot;middle_name&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getMiddleName()}&lt;/patient.middle_name&gt;
    &lt;patient.patient_id openmrs_attribute=&quot;patient_id&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getPatientId()}&lt;/patient.patient_id&gt;
    &lt;patient.previous_mrn openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier(1).getIdentifier()}&lt;/patient.previous_mrn&gt;
  &lt;/patient&gt;
  &lt;encounter&gt;
    &lt;encounter.encounter_datetime openmrs_attribute=&quot;encounter_datetime&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.location_id openmrs_attribute=&quot;location_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.provider_id openmrs_attribute=&quot;provider_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
  &lt;/encounter&gt;
  &lt;obs&gt;
    &lt;scheduled_visit openmrs_concept=&quot;1246^SCHEDULED VISIT^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/scheduled_visit&gt;
    &lt;pay_category multiple=&quot;0&quot; openmrs_concept=&quot;5282^PAY CATEGORY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pay_category&gt;
    &lt;discordant_couple multiple=&quot;0&quot; openmrs_concept=&quot;6096^DISCORDANT COUPLE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/discordant_couple&gt;
    &lt;antiretrovirals_used_for_mtct_prophylaxis openmrs_concept=&quot;1084^ANTIRETROVIRALS USED FOR MTCT PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretrovirals_used_for_mtct_prophylaxis&gt;
    &lt;pregnancy_status openmrs_concept=&quot;5272^PREGNANCY STATUS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/pregnancy_status&gt;
    &lt;antiretroviral_use_during_pregnancy multiple=&quot;0&quot; openmrs_concept=&quot;1147^ANTIRETROVIRAL USE DURING PREGNANCY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretroviral_use_during_pregnancy&gt;
    &lt;child_of_hiv_patient_in_clinic openmrs_concept=&quot;1153^CHILD OF HIV PATIENT IN CLINIC^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/child_of_hiv_patient_in_clinic&gt;
    &lt;conception_since_last_visit openmrs_concept=&quot;1146^CONCEPTION SINCE LAST VISIT^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/conception_since_last_visit&gt;
    &lt;date_of_confinement openmrs_concept=&quot;5599^DATE OF CONFINEMENT^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/date_of_confinement&gt;
    &lt;history_of_nevirapine_to_infant openmrs_concept=&quot;6095^HISTORY OF NEVIRAPINE TO INFANT^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/history_of_nevirapine_to_infant&gt;
    &lt;infant_feeding_method multiple=&quot;0&quot; openmrs_concept=&quot;1151^INFANT FEEDING METHOD^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/infant_feeding_method&gt;
    &lt;number_of_weeks_pregnant openmrs_concept=&quot;1279^NUMBER OF WEEKS PREGNANT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/number_of_weeks_pregnant&gt;
    &lt;new_complaints openmrs_concept=&quot;1154^NEW COMPLAINTS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/new_complaints&gt;
    &lt;antiretroviral_use openmrs_concept=&quot;1192^ANTIRETROVIRAL USE^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretroviral_use&gt;
    &lt;primary_regimen openmrs_concept=&quot;1155^PRIMARY REGIMEN^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/primary_regimen&gt;
    &lt;tuberculosis_drug_treatment_start_date openmrs_concept=&quot;1113^TUBERCULOSIS DRUG TREATMENT START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_drug_treatment_start_date&gt;
    &lt;antiretroviral_adherence_in_past_week multiple=&quot;0&quot; openmrs_concept=&quot;1164^ANTIRETROVIRAL ADHERENCE IN PAST WEEK^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretroviral_adherence_in_past_week&gt;
    &lt;cryptococcus_treatment_adherence_in_past_week multiple=&quot;0&quot; openmrs_concept=&quot;1247^CRYPTOCOCCUS TREATMENT ADHERENCE IN PAST WEEK^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cryptococcus_treatment_adherence_in_past_week&gt;
    &lt;overall_drug_adherence_in_last_month multiple=&quot;1&quot; openmrs_concept=&quot;1156^OVERALL DRUG ADHERENCE IN LAST MONTH^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;tuberculosis_prophylactic_drugs openmrs_concept=&quot;1158^TUBERCULOSIS PROPHYLACTIC DRUGS^99DCT&quot;&gt;false&lt;/tuberculosis_prophylactic_drugs&gt;
        &lt;antiretroviral_drugs openmrs_concept=&quot;1085^ANTIRETROVIRAL DRUGS^99DCT&quot;&gt;false&lt;/antiretroviral_drugs&gt;
        &lt;yes openmrs_concept=&quot;1065^YES^99DCT&quot;&gt;false&lt;/yes&gt;
        &lt;tuberculosis_treatment_drugs openmrs_concept=&quot;1159^TUBERCULOSIS TREATMENT DRUGS^99DCT&quot;&gt;false&lt;/tuberculosis_treatment_drugs&gt;
        &lt;pneumocystic_carinii_pneumonia_prophylactic_drugs openmrs_concept=&quot;1157^PNEUMOCYSTIC CARINII PNEUMONIA PROPHYLACTIC DRUGS^99DCT&quot;&gt;false&lt;/pneumocystic_carinii_pneumonia_prophylactic_drugs&gt;
        &lt;no openmrs_concept=&quot;1066^NO^99DCT&quot;&gt;false&lt;/no&gt;
    &lt;/overall_drug_adherence_in_last_month&gt;
    &lt;pcp_prophylaxis_adherence_in_past_week multiple=&quot;0&quot; openmrs_concept=&quot;6065^PCP PROPHYLAXIS ADHERENCE IN PAST WEEK^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pcp_prophylaxis_adherence_in_past_week&gt;
    &lt;tuberculosis_prophylaxis_adherence_in_past_week multiple=&quot;0&quot; openmrs_concept=&quot;1165^TUBERCULOSIS PROPHYLAXIS ADHERENCE IN PAST WEEK^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_prophylaxis_adherence_in_past_week&gt;
    &lt;tuberculosis_treatment_adherence_in_past_week multiple=&quot;0&quot; openmrs_concept=&quot;6077^TUBERCULOSIS TREATMENT ADHERENCE IN PAST WEEK^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_treatment_adherence_in_past_week&gt;
    &lt;blood_oxygen_saturation openmrs_concept=&quot;5092^BLOOD OXYGEN SATURATION^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/blood_oxygen_saturation&gt;
    &lt;diastolic_blood_pressure openmrs_concept=&quot;5086^DIASTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/diastolic_blood_pressure&gt;
    &lt;general_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1119^GENERAL EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;gluteal_wasting openmrs_concept=&quot;5243^GLUTEAL WASTING^99DCT&quot;&gt;false&lt;/gluteal_wasting&gt;
        &lt;lymphadenopathy openmrs_concept=&quot;161^LYMPHADENOPATHY^99DCT&quot;&gt;false&lt;/lymphadenopathy&gt;
        &lt;oedema openmrs_concept=&quot;460^OEDEMA^99DCT&quot;&gt;false&lt;/oedema&gt;
        &lt;pallor openmrs_concept=&quot;5245^PALLOR^99DCT&quot;&gt;false&lt;/pallor&gt;
        &lt;poor_weight_gain openmrs_concept=&quot;1396^POOR WEIGHT GAIN^99DCT&quot;&gt;false&lt;/poor_weight_gain&gt;
        &lt;oral_sores openmrs_concept=&quot;5244^ORAL SORES^99DCT&quot;&gt;false&lt;/oral_sores&gt;
        &lt;temporal_wasting openmrs_concept=&quot;5201^TEMPORAL WASTING^99DCT&quot;&gt;false&lt;/temporal_wasting&gt;
        &lt;jaundice openmrs_concept=&quot;215^JAUNDICE^99DCT&quot;&gt;false&lt;/jaundice&gt;
    &lt;/general_exam_findings&gt;
    &lt;height_cm openmrs_concept=&quot;5090^HEIGHT (CM)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/height_cm&gt;
    &lt;mucocutaneous_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1166^MUCOCUTANEOUS EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;oedema openmrs_concept=&quot;460^OEDEMA^99DCT&quot;&gt;false&lt;/oedema&gt;
        &lt;candidiasis_oral openmrs_concept=&quot;5334^CANDIDIASIS, ORAL^99DCT&quot;&gt;false&lt;/candidiasis_oral&gt;
        &lt;kaposi_sarcoma_oral openmrs_concept=&quot;644^KAPOSI SARCOMA ORAL^99DCT&quot;&gt;false&lt;/kaposi_sarcoma_oral&gt;
        &lt;rash openmrs_concept=&quot;512^RASH^99DCT&quot;&gt;false&lt;/rash&gt;
    &lt;/mucocutaneous_exam_findings&gt;
    &lt;pulse openmrs_concept=&quot;5087^PULSE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pulse&gt;
    &lt;systolic_blood_pressure openmrs_concept=&quot;5085^SYSTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/systolic_blood_pressure&gt;
    &lt;temperature_c openmrs_concept=&quot;5088^TEMPERATURE (C)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/temperature_c&gt;
    &lt;weight_kg openmrs_concept=&quot;5089^WEIGHT (KG)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/weight_kg&gt;
    &lt;current_who_hiv_stage multiple=&quot;0&quot; openmrs_concept=&quot;5356^CURRENT WHO HIV STAGE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_who_hiv_stage&gt;
    &lt;adult_who_condition_query multiple=&quot;0&quot; openmrs_concept=&quot;6048^ADULT WHO CONDITION QUERY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/adult_who_condition_query&gt;
    &lt;new_who_slash_cdc_staging_criteria_met openmrs_concept=&quot;1248^NEW WHO/CDC STAGING CRITERIA MET^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/new_who_slash_cdc_staging_criteria_met&gt;
    &lt;absolute_lymphocyte_count openmrs_concept=&quot;952^ABSOLUTE LYMPHOCYTE COUNT, AUTOMATED^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/absolute_lymphocyte_count&gt;
    &lt;cd4_count openmrs_concept=&quot;5497^CD4, BY FACS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_count&gt;
    &lt;cd4_percent openmrs_concept=&quot;730^CD4%, BY FACS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_percent&gt;
    &lt;cd8_count openmrs_concept=&quot;853^CD8, BY FACS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd8_count&gt;
    &lt;hemoglobin openmrs_concept=&quot;21^HEMOGLOBIN^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hemoglobin&gt;
    &lt;hiv_enzyme_immunoassay_qualitative multiple=&quot;0&quot; openmrs_concept=&quot;1042^HIV ENZYME IMMUNOASSAY, QUALITATIVE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_enzyme_immunoassay_qualitative&gt;
    &lt;hiv_viral_load openmrs_concept=&quot;856^HIV VIRAL LOAD, QUANTITATIVE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_viral_load&gt;
    &lt;mean_corpuscular_volume openmrs_concept=&quot;851^MEAN CORPUSCULAR VOLUME^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/mean_corpuscular_volume&gt;
    &lt;platelets openmrs_concept=&quot;729^PLATELETS COUNT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/platelets&gt;
    &lt;serum_creatinine openmrs_concept=&quot;790^SERUM CREATININE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_creatinine&gt;
    &lt;serum_glutamic-pyruvic_transaminase openmrs_concept=&quot;654^SERUM GLUTAMIC-PYRUVIC TRANSAMINASE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glutamic-pyruvic_transaminase&gt;
    &lt;vdrl multiple=&quot;0&quot; openmrs_concept=&quot;299^SYPHILIS - VDRL, QUALITATIVE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/vdrl&gt;
    &lt;white_blood_cells openmrs_concept=&quot;678^WHITE BLOOD CELLS COUNT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/white_blood_cells&gt;
    &lt;x-ray_chest multiple=&quot;0&quot; openmrs_concept=&quot;12^X-RAY, CHEST^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/x-ray_chest&gt;
    &lt;medication_received_at_vist openmrs_concept=&quot;1276^MEDICATION RECEIVED AT VIST^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/medication_received_at_vist&gt;
    &lt;patient_hospitalized multiple=&quot;0&quot; openmrs_concept=&quot;1273^PATIENT HOSPITALIZED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_hospitalized&gt;
    &lt;return_visit_date openmrs_concept=&quot;5096^RETURN VISIT DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/return_visit_date&gt;
    &lt;transfer_care_to_other_center multiple=&quot;0&quot; openmrs_concept=&quot;1285^TRANSFER CARE TO OTHER CENTER^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/transfer_care_to_other_center&gt;
  &lt;/obs&gt;
  &lt;problem_list openmrs_concept=&quot;1284^PROBLEM LIST^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
    &lt;problem_added multiple=&quot;0&quot; openmrs_concept=&quot;6042^PROBLEM ADDED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_added&gt;
    &lt;problem_resolved multiple=&quot;0&quot; openmrs_concept=&quot;6097^PROBLEM RESOLVED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_resolved&gt;
  &lt;/problem_list&gt;
  &lt;orders&gt;
    &lt;medication_history openmrs_concept=&quot;1281^MEDICATION HISTORY^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;current_antiretroviral_drugs_used_for_treatment multiple=&quot;1&quot; openmrs_concept=&quot;1088^CURRENT ANTIRETROVIRAL DRUGS USED FOR TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;zidovudine_and_lamivudine openmrs_concept=&quot;630^ZIDOVUDINE AND LAMIVUDINE^99DCT&quot;&gt;false&lt;/zidovudine_and_lamivudine&gt;
            &lt;d4t-40 openmrs_concept=&quot;625^STAVUDINE^99DCT^6^d4T-40^99RX&quot;&gt;false&lt;/d4t-40&gt;
            &lt;ddi_125 openmrs_concept=&quot;796^DIDANOSINE^99DCT^9^DDI 125^99RX&quot;&gt;false&lt;/ddi_125&gt;
            &lt;nevirapine openmrs_concept=&quot;631^NEVIRAPINE^99DCT&quot;&gt;false&lt;/nevirapine&gt;
            &lt;unknown_antiretroviral_drug openmrs_concept=&quot;5811^UNKNOWN ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/unknown_antiretroviral_drug&gt;
            &lt;lopinavir_and_ritonavir openmrs_concept=&quot;794^LOPINAVIR AND RITONAVIR^99DCT&quot;&gt;false&lt;/lopinavir_and_ritonavir&gt;
            &lt;d4t-30 openmrs_concept=&quot;625^STAVUDINE^99DCT^5^d4T-30^99RX&quot;&gt;false&lt;/d4t-30&gt;
            &lt;lamivudine_and_tenofovir openmrs_concept=&quot;1400^LAMIVUDINE AND TENOFOVIR^99DCT&quot;&gt;false&lt;/lamivudine_and_tenofovir&gt;
            &lt;indinavir openmrs_concept=&quot;749^INDINAVIR^99DCT&quot;&gt;false&lt;/indinavir&gt;
            &lt;triomune-40 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^3^Triomune-40^99RX&quot;&gt;false&lt;/triomune-40&gt;
            &lt;nelfinavir openmrs_concept=&quot;635^NELFINAVIR^99DCT&quot;&gt;false&lt;/nelfinavir&gt;
            &lt;didanosine openmrs_concept=&quot;796^DIDANOSINE^99DCT&quot;&gt;false&lt;/didanosine&gt;
            &lt;lamivudine openmrs_concept=&quot;628^LAMIVUDINE^99DCT&quot;&gt;false&lt;/lamivudine&gt;
            &lt;tenofovir openmrs_concept=&quot;802^TENOFOVIR^99DCT&quot;&gt;false&lt;/tenofovir&gt;
            &lt;zidovudine openmrs_concept=&quot;797^ZIDOVUDINE^99DCT&quot;&gt;false&lt;/zidovudine&gt;
            &lt;stavudine openmrs_concept=&quot;625^STAVUDINE^99DCT&quot;&gt;false&lt;/stavudine&gt;
            &lt;efavirenz openmrs_concept=&quot;633^EFAVIRENZ^99DCT&quot;&gt;false&lt;/efavirenz&gt;
            &lt;other_antiretroviral_drug openmrs_concept=&quot;5424^OTHER ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/other_antiretroviral_drug&gt;
            &lt;ddi_200 openmrs_concept=&quot;796^DIDANOSINE^99DCT^10^DDI 200^99RX&quot;&gt;false&lt;/ddi_200&gt;
            &lt;triomune-30 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^2^Triomune-30^99RX&quot;&gt;false&lt;/triomune-30&gt;
            &lt;abacavir openmrs_concept=&quot;814^ABACAVIR^99DCT&quot;&gt;false&lt;/abacavir&gt;
            &lt;stavudine_lamivudine_and_nevirapine openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT&quot;&gt;false&lt;/stavudine_lamivudine_and_nevirapine&gt;
      &lt;/current_antiretroviral_drugs_used_for_treatment&gt;
      &lt;patient_reported_current_cryptococcus_treatment multiple=&quot;0&quot; openmrs_concept=&quot;1112^PATIENT REPORTED CURRENT CRYPTOCOCCUS TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/patient_reported_current_cryptococcus_treatment&gt;
      &lt;patient_reported_current_pcp_prophylaxis multiple=&quot;0&quot; openmrs_concept=&quot;1109^PATIENT REPORTED CURRENT PCP PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/patient_reported_current_pcp_prophylaxis&gt;
      &lt;patient_reported_current_tuberculosis_prophylaxis multiple=&quot;0&quot; openmrs_concept=&quot;1110^PATIENT REPORTED CURRENT TUBERCULOSIS PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/patient_reported_current_tuberculosis_prophylaxis&gt;
      &lt;patient_reported_current_tuberculosis_treatment multiple=&quot;1&quot; openmrs_concept=&quot;1111^PATIENT REPORTED CURRENT TUBERCULOSIS TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;streptomycin openmrs_concept=&quot;438^STREPTOMYCIN^99DCT&quot;&gt;false&lt;/streptomycin&gt;
            &lt;ethambutol openmrs_concept=&quot;745^ETHAMBUTOL^99DCT&quot;&gt;false&lt;/ethambutol&gt;
            &lt;ethambutol_and_isonizaid openmrs_concept=&quot;1108^ETHAMBUTOL AND ISONIZAID^99DCT&quot;&gt;false&lt;/ethambutol_and_isonizaid&gt;
            &lt;isoniazid openmrs_concept=&quot;656^ISONIAZID^99DCT&quot;&gt;false&lt;/isoniazid&gt;
            &lt;rifampicin_isoniazid_pyrazinamide_and_ethambutol openmrs_concept=&quot;1131^RIFAMPICIN ISONIAZID PYRAZINAMIDE AND ETHAMBUTOL^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_pyrazinamide_and_ethambutol&gt;
            &lt;rifampicin_isoniazid_and_pyrazinamide openmrs_concept=&quot;768^RIFAMPICIN ISONIAZID AND PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_and_pyrazinamide&gt;
            &lt;pyrazinamide openmrs_concept=&quot;5829^PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/pyrazinamide&gt;
            &lt;rifampicin openmrs_concept=&quot;767^RIFAMPICIN^99DCT&quot;&gt;false&lt;/rifampicin&gt;
            &lt;rifampicin_and_isoniazid openmrs_concept=&quot;1194^RIFAMPICIN AND ISONIAZID^99DCT&quot;&gt;false&lt;/rifampicin_and_isoniazid&gt;
      &lt;/patient_reported_current_tuberculosis_treatment&gt;
    &lt;/medication_history&gt;
    &lt;medication_orders openmrs_concept=&quot;1282^MEDICATION ORDERS^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;antiretroviral_plan multiple=&quot;0&quot; openmrs_concept=&quot;1255^ANTIRETROVIRAL PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/antiretroviral_plan&gt;
      &lt;antiretrovirals_started multiple=&quot;1&quot; openmrs_concept=&quot;1250^ANTIRETROVIRALS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;efavirenz openmrs_concept=&quot;633^EFAVIRENZ^99DCT&quot;&gt;false&lt;/efavirenz&gt;
            &lt;triomune-40 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^3^Triomune-40^99RX&quot;&gt;false&lt;/triomune-40&gt;
            &lt;lamivudine openmrs_concept=&quot;628^LAMIVUDINE^99DCT&quot;&gt;false&lt;/lamivudine&gt;
            &lt;zidovudine openmrs_concept=&quot;797^ZIDOVUDINE^99DCT&quot;&gt;false&lt;/zidovudine&gt;
            &lt;stavudine openmrs_concept=&quot;625^STAVUDINE^99DCT&quot;&gt;false&lt;/stavudine&gt;
            &lt;triomune-30 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^2^Triomune-30^99RX&quot;&gt;false&lt;/triomune-30&gt;
            &lt;lopinavir_and_ritonavir openmrs_concept=&quot;794^LOPINAVIR AND RITONAVIR^99DCT&quot;&gt;false&lt;/lopinavir_and_ritonavir&gt;
            &lt;d4t-30 openmrs_concept=&quot;625^STAVUDINE^99DCT^5^d4T-30^99RX&quot;&gt;false&lt;/d4t-30&gt;
            &lt;nelfinavir openmrs_concept=&quot;635^NELFINAVIR^99DCT&quot;&gt;false&lt;/nelfinavir&gt;
            &lt;ddi_200 openmrs_concept=&quot;796^DIDANOSINE^99DCT^10^DDI 200^99RX&quot;&gt;false&lt;/ddi_200&gt;
            &lt;lamivudine_and_tenofovir openmrs_concept=&quot;1400^LAMIVUDINE AND TENOFOVIR^99DCT&quot;&gt;false&lt;/lamivudine_and_tenofovir&gt;
            &lt;zidovudine_and_lamivudine openmrs_concept=&quot;630^ZIDOVUDINE AND LAMIVUDINE^99DCT&quot;&gt;false&lt;/zidovudine_and_lamivudine&gt;
            &lt;d4t-40 openmrs_concept=&quot;625^STAVUDINE^99DCT^6^d4T-40^99RX&quot;&gt;false&lt;/d4t-40&gt;
            &lt;tenofovir openmrs_concept=&quot;802^TENOFOVIR^99DCT&quot;&gt;false&lt;/tenofovir&gt;
            &lt;abacavir openmrs_concept=&quot;814^ABACAVIR^99DCT&quot;&gt;false&lt;/abacavir&gt;
            &lt;indinavir openmrs_concept=&quot;749^INDINAVIR^99DCT&quot;&gt;false&lt;/indinavir&gt;
            &lt;ddi_125 openmrs_concept=&quot;796^DIDANOSINE^99DCT^9^DDI 125^99RX&quot;&gt;false&lt;/ddi_125&gt;
            &lt;didanosine openmrs_concept=&quot;796^DIDANOSINE^99DCT&quot;&gt;false&lt;/didanosine&gt;
            &lt;nevirapine openmrs_concept=&quot;631^NEVIRAPINE^99DCT&quot;&gt;false&lt;/nevirapine&gt;
      &lt;/antiretrovirals_started&gt;
      &lt;cryptococcal_treatment_plan multiple=&quot;0&quot; openmrs_concept=&quot;1277^CRYPTOCOCCAL TREATMENT PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/cryptococcal_treatment_plan&gt;
      &lt;cryptococcus_treatment_started multiple=&quot;1&quot; openmrs_concept=&quot;1278^CRYPTOCOSSUS TREATMENT STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;fluconazole openmrs_concept=&quot;747^FLUCONAZOLE^99DCT&quot;&gt;false&lt;/fluconazole&gt;
      &lt;/cryptococcus_treatment_started&gt;
      &lt;pcp_prophylaxis_plan multiple=&quot;0&quot; openmrs_concept=&quot;1261^PCP PROPHYLAXIS PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/pcp_prophylaxis_plan&gt;
      &lt;pcp_prophylaxis_started multiple=&quot;1&quot; openmrs_concept=&quot;1263^PCP PROPHYLAXIS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;trimethoprim_and_sulfamethoxazole openmrs_concept=&quot;916^TRIMETHOPRIM AND SULFAMETHOXAZOLE^99DCT&quot;&gt;false&lt;/trimethoprim_and_sulfamethoxazole&gt;
            &lt;dapsone openmrs_concept=&quot;92^DAPSONE^99DCT&quot;&gt;false&lt;/dapsone&gt;
      &lt;/pcp_prophylaxis_started&gt;
      &lt;reason_antiretrovirals_started multiple=&quot;0&quot; openmrs_concept=&quot;1251^REASON ANTIRETROVIRALS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_antiretrovirals_started&gt;
      &lt;reason_antiretrovirals_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1252^REASON ANTIRETROVIRALS STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_antiretrovirals_stopped&gt;
      &lt;reason_pcp_prophylaxis_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1262^REASON PCP PROPHYLAXIS STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_pcp_prophylaxis_stopped&gt;
      &lt;reason_tuberculosis_prophylaxis_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1266^REASON TUBERCULOSIS PROPHYLAXIS STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_tuberculosis_prophylaxis_stopped&gt;
      &lt;reason_tuberculosis_treatment_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1269^REASON TUBERCULOSIS TREATMENT STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_tuberculosis_treatment_stopped&gt;
      &lt;tuberculosis_prophylaxis_plan multiple=&quot;0&quot; openmrs_concept=&quot;1265^TUBERCULOSIS PROPHYLAXIS PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/tuberculosis_prophylaxis_plan&gt;
      &lt;tuberculosis_prophylaxis_started multiple=&quot;1&quot; openmrs_concept=&quot;1264^TUBERCULOSIS PROPHYLAXIS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;isoniazid openmrs_concept=&quot;656^ISONIAZID^99DCT&quot;&gt;false&lt;/isoniazid&gt;
      &lt;/tuberculosis_prophylaxis_started&gt;
      &lt;tuberculosis_treatment_plan multiple=&quot;0&quot; openmrs_concept=&quot;1268^TUBERCULOSIS TREATMENT PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/tuberculosis_treatment_plan&gt;
      &lt;tuberculosis_treatment_started multiple=&quot;1&quot; openmrs_concept=&quot;1270^TUBERCULOSIS TREATMENT STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;rifampicin_isoniazid_and_pyrazinamide openmrs_concept=&quot;768^RIFAMPICIN ISONIAZID AND PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_and_pyrazinamide&gt;
            &lt;rifampicin openmrs_concept=&quot;767^RIFAMPICIN^99DCT&quot;&gt;false&lt;/rifampicin&gt;
            &lt;rifampicin_isoniazid_pyrazinamide_and_ethambutol openmrs_concept=&quot;1131^RIFAMPICIN ISONIAZID PYRAZINAMIDE AND ETHAMBUTOL^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_pyrazinamide_and_ethambutol&gt;
            &lt;rifampicin_and_isoniazid openmrs_concept=&quot;1194^RIFAMPICIN AND ISONIAZID^99DCT&quot;&gt;false&lt;/rifampicin_and_isoniazid&gt;
            &lt;streptomycin openmrs_concept=&quot;438^STREPTOMYCIN^99DCT&quot;&gt;false&lt;/streptomycin&gt;
            &lt;isoniazid openmrs_concept=&quot;656^ISONIAZID^99DCT&quot;&gt;false&lt;/isoniazid&gt;
            &lt;ethambutol_and_isonizaid openmrs_concept=&quot;1108^ETHAMBUTOL AND ISONIZAID^99DCT&quot;&gt;false&lt;/ethambutol_and_isonizaid&gt;
            &lt;ethambutol openmrs_concept=&quot;745^ETHAMBUTOL^99DCT&quot;&gt;false&lt;/ethambutol&gt;
            &lt;pyrazinamide openmrs_concept=&quot;5829^PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/pyrazinamide&gt;
      &lt;/tuberculosis_treatment_started&gt;
    &lt;/medication_orders&gt;
    &lt;laboratory_orders openmrs_concept=&quot;1283^LABORATORY ORDERS^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;tests_ordered multiple=&quot;1&quot; openmrs_concept=&quot;1271^TESTS ORDERED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;sputum_for_acid_fast_bacilli openmrs_concept=&quot;307^SPUTUM FOR ACID FAST BACILLI^99DCT&quot;&gt;false&lt;/sputum_for_acid_fast_bacilli&gt;
            &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
            &lt;hiv_enzyme_immunoassay_qualitative openmrs_concept=&quot;1042^HIV ENZYME IMMUNOASSAY, QUALITATIVE^99DCT&quot;&gt;false&lt;/hiv_enzyme_immunoassay_qualitative&gt;
            &lt;serum_glutamic-oxaloacetic_transaminase openmrs_concept=&quot;653^SERUM GLUTAMIC-OXALOACETIC TRANSAMINASE^99DCT&quot;&gt;false&lt;/serum_glutamic-oxaloacetic_transaminase&gt;
            &lt;tuberculin_skin_test openmrs_concept=&quot;5475^TUBERCULIN SKIN TEST^99DCT&quot;&gt;false&lt;/tuberculin_skin_test&gt;
            &lt;serum_glutamic-pyruvic_transaminase openmrs_concept=&quot;654^SERUM GLUTAMIC-PYRUVIC TRANSAMINASE^99DCT&quot;&gt;false&lt;/serum_glutamic-pyruvic_transaminase&gt;
            &lt;hiv_dna_polymerase_chain_reaction_qualitative openmrs_concept=&quot;1030^HIV DNA POLYMERASE CHAIN REACTION, QUALITATIVE^99DCT&quot;&gt;false&lt;/hiv_dna_polymerase_chain_reaction_qualitative&gt;
            &lt;hemoglobin openmrs_concept=&quot;21^HEMOGLOBIN^99DCT&quot;&gt;false&lt;/hemoglobin&gt;
            &lt;syphilis_-_vdrl_qualitative openmrs_concept=&quot;299^SYPHILIS - VDRL, QUALITATIVE^99DCT&quot;&gt;false&lt;/syphilis_-_vdrl_qualitative&gt;
            &lt;cd4_panel openmrs_concept=&quot;657^CD4 PANEL^99DCT&quot;&gt;false&lt;/cd4_panel&gt;
            &lt;serum_creatinine openmrs_concept=&quot;790^SERUM CREATININE^99DCT&quot;&gt;false&lt;/serum_creatinine&gt;
            &lt;serum_electrolytes openmrs_concept=&quot;5473^SERUM ELECTROLYTES^99DCT&quot;&gt;false&lt;/serum_electrolytes&gt;
            &lt;complete_blood_count openmrs_concept=&quot;1019^COMPLETE BLOOD COUNT^99DCT&quot;&gt;false&lt;/complete_blood_count&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;x-ray_chest openmrs_concept=&quot;12^X-RAY, CHEST^99DCT&quot;&gt;false&lt;/x-ray_chest&gt;
            &lt;hiv_viral_load_quantitative openmrs_concept=&quot;856^HIV VIRAL LOAD, QUANTITATIVE^99DCT&quot;&gt;false&lt;/hiv_viral_load_quantitative&gt;
            &lt;urine_pregnancy_test_qualitative openmrs_concept=&quot;45^URINE PREGNANCY TEST, QUALITATIVE^99DCT&quot;&gt;false&lt;/urine_pregnancy_test_qualitative&gt;
      &lt;/tests_ordered&gt;
    &lt;/laboratory_orders&gt;
    &lt;services_ordered openmrs_concept=&quot;31^SERVICES ORDERED^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;referrals_ordered multiple=&quot;1&quot; openmrs_concept=&quot;1272^REFERRALS ORDERED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;counseling openmrs_concept=&quot;1582^COUNSELING^99DCT&quot;&gt;false&lt;/counseling&gt;
            &lt;adherence_counseling openmrs_concept=&quot;5488^ADHERENCE COUNSELING^99DCT&quot;&gt;false&lt;/adherence_counseling&gt;
            &lt;inpatient_care_or_hospitalization openmrs_concept=&quot;5485^INPATIENT CARE OR HOSPITALIZATION^99DCT&quot;&gt;false&lt;/inpatient_care_or_hospitalization&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;social_support_services openmrs_concept=&quot;5486^SOCIAL SUPPORT SERVICES^99DCT&quot;&gt;false&lt;/social_support_services&gt;
            &lt;nutritional_support openmrs_concept=&quot;5484^NUTRITIONAL SUPPORT^99DCT&quot;&gt;false&lt;/nutritional_support&gt;
            &lt;family_planning_services openmrs_concept=&quot;5483^FAMILY PLANNING SERVICES^99DCT&quot;&gt;false&lt;/family_planning_services&gt;
            &lt;mental_health_services openmrs_concept=&quot;5489^MENTAL HEALTH SERVICES^99DCT&quot;&gt;false&lt;/mental_health_services&gt;
            &lt;alcohol_counseling openmrs_concept=&quot;1288^ALCOHOL COUNSELING^99DCT&quot;&gt;false&lt;/alcohol_counseling&gt;
            &lt;social_work openmrs_concept=&quot;1580^SOCIAL WORK^99DCT&quot;&gt;false&lt;/social_work&gt;
            &lt;disclosure_counseling openmrs_concept=&quot;1167^DISCLOSURE COUNSELING^99DCT&quot;&gt;false&lt;/disclosure_counseling&gt;
            &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
            &lt;support_group openmrs_concept=&quot;1581^SUPPORT GROUP^99DCT&quot;&gt;false&lt;/support_group&gt;
            &lt;psychosocial_counseling openmrs_concept=&quot;5490^PSYCHOSOCIAL COUNSELING^99DCT&quot;&gt;false&lt;/psychosocial_counseling&gt;
            &lt;individual_adherence_counseling openmrs_concept=&quot;1687^INDIVIDUAL ADHERENCE COUNSELING^99DCT&quot;&gt;false&lt;/individual_adherence_counseling&gt;
            &lt;tuberculosis_treatment_or_dot_program openmrs_concept=&quot;5487^TUBERCULOSIS TREATMENT OR DOT PROGRAM^99DCT&quot;&gt;false&lt;/tuberculosis_treatment_or_dot_program&gt;
      &lt;/referrals_ordered&gt;
    &lt;/services_ordered&gt;
  &lt;/orders&gt;
  &lt;other/&gt;&lt;/form&gt;" xslt="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!--
OpenMRS FormEntry Form HL7 Translation

This XSLT is used to translate OpenMRS forms from XML into HL7 2.5 format

@author Burke Mamlin, MD
@author Ben Wolfe
@version 1.9.4

1.9.4 - add support for message uid (as HL7 control id) and transform of patient.health_center to Discharge to Location (PV1-37)
1.9.3 - fixed rounding error on timestamp (tenths of seconds getting rounded up, causing &quot;60&quot; seconds in some cases) 
1.9.2 - first generally useful version
--&gt;

&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot; xmlns:xdt=&quot;http://www.w3.org/2005/xpath-datatypes&quot;&gt;
	&lt;xsl:output method=&quot;text&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;no&quot;/&gt;

&lt;xsl:variable name=&quot;SENDING-APPLICATION&quot;&gt;FORMENTRY&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;SENDING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-APPLICATION&quot;&gt;HL7LISTENER&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;PATIENT-AUTHORITY&quot;&gt;&lt;/xsl:variable&gt; &lt;!-- leave blank for internal id, max 20 characters --&gt;
                                                       &lt;!-- for now, must match patient_identifier_type.name --&gt;
&lt;xsl:variable name=&quot;FORM-AUTHORITY&quot;&gt;AMRS.ELD.FORMID&lt;/xsl:variable&gt; &lt;!-- max 20 characters --&gt;

&lt;xsl:template match=&quot;/&quot;&gt;
	&lt;xsl:apply-templates /&gt;
&lt;/xsl:template&gt;

&lt;!-- Form template --&gt;
&lt;xsl:template match=&quot;form&quot;&gt;
	&lt;!-- MSH Header --&gt;
	&lt;xsl:text&gt;MSH|^~\&amp;amp;&lt;/xsl:text&gt;   &lt;!-- Message header, field separator, and encoding characters --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-3 Sending application --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-4 Sending facility --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-5 Receiving application --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-6 Receiving facility --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-7 Date/time message sent --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-8 Security --&gt;
	&lt;xsl:text&gt;|ORU^R01&lt;/xsl:text&gt;       &lt;!-- MSH-9 Message type ^ Event type (observation report unsolicited) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-10 Message control ID --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;header/uid&quot;&gt;
			&lt;xsl:value-of select=&quot;header/uid&quot; /&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;patient/patient.patient_id&quot; /&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|P&lt;/xsl:text&gt;             &lt;!-- MSH-11 Processing ID --&gt;
	&lt;xsl:text&gt;|2.5&lt;/xsl:text&gt;           &lt;!-- MSH-12 HL7 version --&gt;
	&lt;xsl:text&gt;|1&lt;/xsl:text&gt;             &lt;!-- MSH-13 Message sequence number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-14 Continuation Pointer --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-15 Accept Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-16 Application Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-17 Country Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-18 Character Set --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-19 Principal Language of Message --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-20 Alternate Character Set Handling Scheme --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-21 Message Profile Identifier --&gt;
	&lt;xsl:value-of select=&quot;@id&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;
	&lt;xsl:value-of select=&quot;$FORM-AUTHORITY&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;

	&lt;!-- PID header --&gt;
	&lt;xsl:text&gt;PID&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-1 Set ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-2 (deprecated) Patient ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-3 Patient Identifier List --&gt;
	&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
		&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.patient_id&quot; /&gt;
		&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
		&lt;xsl:with-param name=&quot;type&quot; select=&quot;L&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:if test=&quot;patient/patient.previous_mrn and string-length(patient/patient.previous_mrn) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.previous_mrn&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;PRIOR&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;!-- Additional patient identifiers --&gt;
	&lt;!-- This example is for an MTCT-PLUS identifier used in the AMPATH project in Kenya (skipped if not present) --&gt;
	&lt;xsl:if test=&quot;patient/patient.mtctplus_id and string-length(patient/patient.mtctplus_id) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.mtctplus_id&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;MTCTPLUS&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-4 (deprecated) Alternate patient ID --&gt;
	&lt;!-- PID-5 Patient name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- Family name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.family_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Given name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.given_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Middle name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.middle_name&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-6 Mother&apos;s maiden name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-7 Date/Time of Birth --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.date_of_birth&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
	&lt;!-- PV1 header --&gt;
	&lt;xsl:text&gt;PV1&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-1 Sub ID --&gt;
	&lt;xsl:text&gt;|O&lt;/xsl:text&gt;             &lt;!-- PV1-2 Patient class (O = outpatient) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-3 Patient location --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.location_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-4 Admission type (2 = return) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-5 Pre-Admin Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-6 Prior Patient Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-7 Attending Doctor --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.provider_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-8 Referring Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-9 Consulting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-10 Hospital Service --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-11 Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-12 Preadmin Test Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-13 Re-adminssion Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-14 Admit Source --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-15 Ambulatory Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-16 VIP Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-17 Admitting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-18 Patient Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-19 Visit Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-20 Financial Class --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-21 Charge Price Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-22 Courtesy Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-23 Credit Rating --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-24 Contract Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-25 Contract Effective Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-26 Contract Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-27 Contract Period --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-28 Interest Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-29 Transfer to Bad Debt Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-30 Transfer to Bad Debt Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Agency Code --&gt;
  &lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Transfer Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-33 Bad Debt Recovery Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-34 Delete Account Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-35 Delete Account Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-36 Discharge Disposition --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-37 Discharge To Location --&gt;
	&lt;xsl:if test=&quot;patient/patient.health_center&quot;&gt;
		&lt;xsl:value-of select=&quot;replace(patient/patient.health_center,&apos;\^&apos;,&apos;&amp;amp;&apos;)&quot; /&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-38 Diet Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-39 Servicing Facility --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-40 Bed Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-41 Account Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-42 Pending Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-43 Prior Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-44 Admit Date/Time --&gt;
	&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-45 Discharge Date/Time --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-46 Current Patient Balance --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-47 Total Charges --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-48 Total Adjustments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-49 Total Payments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-50 Alternate Visit ID --&gt;
	&lt;xsl:text&gt;|V&lt;/xsl:text&gt;             &lt;!-- PV1-51 Visit Indicator --&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- We use encounter date as the timestamp for each observation --&gt;
	&lt;xsl:variable name=&quot;encounterTimestamp&quot;&gt;
		&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
			&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:variable&gt;
	
	&lt;!-- ORC Common Order Segment --&gt;
	&lt;xsl:text&gt;ORC&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|RE&lt;/xsl:text&gt;            &lt;!-- ORC-1 Order Control (RE = obs to follow) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-2 Placer Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-3 Filler Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-4 Placer Group Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-5 Order Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-6 Response Flag --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-7 Quantity/Timing --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-8 Parent --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-9 Date/Time of Transaction --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:dateTime(header/date_entered)&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-10 Entered By --&gt;
	&lt;xsl:value-of select=&quot;header/enterer&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- Observation(s) --&gt;
	&lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsListCount&quot; select=&quot;count($obsList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;!-- Observation OBR --&gt;
	&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
	&lt;xsl:text&gt;1&lt;/xsl:text&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
	&lt;xsl:value-of select=&quot;obs/@openmrs_concept&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- observation OBXs --&gt;
	&lt;xsl:for-each select=&quot;$obsList&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;value&quot;&gt;
				&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
					&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
					&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
					&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
					&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
				&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat($setId,position())&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:for-each&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:for-each&gt;
	
	&lt;!-- Grouped observation(s) --&gt;
	&lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsGroupListCount&quot; select=&quot;count($obsGroupList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$obsGroupList&quot;&gt;
		&lt;!-- Observation OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + position()&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
		
		&lt;!-- Generate OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;1&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat(&apos;1.&apos;,position())&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;
	&lt;/xsl:for-each&gt;

	&lt;!-- Problem list(s) --&gt;
	&lt;xsl:variable name=&quot;problemList&quot; select=&quot;problem_list/*[value[text() != &apos;&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;problemListCount&quot; select=&quot;count($problemList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:if test=&quot;$problemList&quot;&gt;
		&lt;!-- Problem list OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;problem_list/@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

		&lt;!-- Problem list OBXs --&gt;
		&lt;xsl:for-each select=&quot;$problemList&quot;&gt;
			&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
				&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;&apos;CWE&apos;&quot; /&gt;
				&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
				&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
			&lt;/xsl:call-template&gt;		
		&lt;/xsl:for-each&gt;
	&lt;/xsl:if&gt;
	
	&lt;!-- Orders --&gt;
	&lt;xsl:variable name=&quot;orderList&quot; select=&quot;orders/*[*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]]&quot; /&gt;
	&lt;xsl:variable name=&quot;orderListCount&quot; select=&quot;count($orderList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$orderList&quot;&gt;
		&lt;!-- Order section OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + $problemListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
		&lt;!-- Order OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;position()&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;	
	&lt;/xsl:for-each&gt;
	
&lt;/xsl:template&gt;

&lt;!-- Patient Identifier (CX) generator --&gt;
&lt;xsl:template name=&quot;patient_id&quot;&gt;
	&lt;xsl:param name=&quot;pid&quot; /&gt;
	&lt;xsl:param name=&quot;auth&quot; /&gt;
	&lt;xsl:param name=&quot;type&quot; /&gt;
	&lt;xsl:value-of select=&quot;$pid&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check digit --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check Digit Scheme --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Assigning Authority --&gt;
	&lt;xsl:value-of select=&quot;$auth&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Identifier Type --&gt;
	&lt;xsl:value-of select=&quot;$type&quot; /&gt;
&lt;/xsl:template&gt;

&lt;!-- OBX Generator --&gt;
&lt;xsl:template name=&quot;obsObx&quot;&gt;
	&lt;xsl:param name=&quot;setId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;subId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;datatype&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;concept&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;date&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;time&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;value&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;units&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;encounterTimestamp&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:text&gt;OBX&lt;/xsl:text&gt;                     &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Set ID --&gt;
	&lt;xsl:value-of select=&quot;$setId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation datatype --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:text&gt;NM&lt;/xsl:text&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$datatype&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Concept (what was observed --&gt;
	&lt;xsl:value-of select=&quot;$concept&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Sub-ID --&gt;
	&lt;xsl:value-of select=&quot;$subId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Value --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TS&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;DT&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TM&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Time&quot;&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$value = &apos;0&apos; or upper-case($value) = &apos;FALSE&apos;&quot;&gt;0&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;1&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$value&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Units --&gt;
	&lt;xsl:value-of select=&quot;$units&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Reference range --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Abnormal flags --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Probability --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Nature of abnormal test --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation result status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Effective date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- User defined access checks --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Date time of observation --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$date and $time&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;dateTime($date,$time)&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$date&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$encounterTimestamp&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted timestamp --&gt;
&lt;xsl:template name=&quot;hl7Timestamp&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(year-from-dateTime($date),format-number(month-from-dateTime($date),&apos;00&apos;),format-number(day-from-dateTime($date),&apos;00&apos;),format-number(hours-from-dateTime($date),&apos;00&apos;),format-number(minutes-from-dateTime($date),&apos;00&apos;),format-number(floor(seconds-from-dateTime($date)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted date --&gt;
&lt;xsl:template name=&quot;hl7Date&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;contains(string($date),&apos;T&apos;)&quot;&gt;
				&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:date(substring-before($date,&apos;T&apos;))&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
					&lt;xsl:value-of select=&quot;concat(year-from-date($date),format-number(month-from-date($date),&apos;00&apos;),format-number(day-from-date($date),&apos;00&apos;))&quot; /&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;				
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted time --&gt;
&lt;xsl:template name=&quot;hl7Time&quot;&gt;
	&lt;xsl:param name=&quot;time&quot; /&gt;
	&lt;xsl:if test=&quot;$time != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(format-number(hours-from-time($time),&apos;00&apos;),format-number(minutes-from-time($time),&apos;00&apos;),format-number(floor(seconds-from-time($time)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;" creator="2" date_created="2005-02-22 23:06:27.0" changed_by="54709" date_changed="2007-10-24 14:52:00.0" retired="false" retired_reason=""/>
  <form form_id="15" name="AMPATH Adult Initial Visit Form" version="4.1" build="45" published="0" description="AMPATH Adult Initial Visit Form - first version" encounter_type="1" template="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;?mso-infoPathSolution name=&quot;AMPATH Adult Initial Visit Form&quot; href=&quot;https://dev.openmrs.org/amrs/moduleServlet/formentry/forms/15.xsn&quot; solutionVersion=&quot;4.1.0.45&quot; productVersion=&quot;11.0.6357&quot; PIVersion=&quot;1.0.0.0&quot; ?&gt;&lt;?mso-application progid=&quot;InfoPath.Document&quot;?&gt;&lt;form xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xd=&quot;http://schemas.microsoft.com/office/infopath/2003&quot; xmlns:openmrs=&quot;https://dev.openmrs.org/amrs/moduleServlet/formentry/forms/schema/15-45&quot; id=&quot;15&quot; name=&quot;AMPATH Adult Initial Visit Form&quot; version=&quot;4.1&quot;&gt;
  &lt;header&gt;
    &lt;enterer&gt;$!{enterer}&lt;/enterer&gt;
    &lt;date_entered&gt;$!{dateEntered}&lt;/date_entered&gt;
    &lt;session&gt;$!{sessionId}&lt;/session&gt;
    &lt;uid&gt;$!{uid}&lt;/uid&gt;
  &lt;/header&gt;
  &lt;all_patient_data&gt;
    &lt;patient.tribe openmrs_attribute=&quot;tribe&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getTribe().getTribeId()}^$!{patient.getTribe().getName()}&lt;/patient.tribe&gt;
    &lt;patient_identifier&gt;
      &lt;patient_identifier.identifier openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.getIdentifier()}&lt;/patient_identifier.identifier&gt;
      &lt;patient_identifier.identifier_type_id openmrs_attribute=&quot;identifier_type_id&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.getIdentifierType().getPatientIdentifierTypeId()}&lt;/patient_identifier.identifier_type_id&gt;
      &lt;patient_identifier.location_id openmrs_attribute=&quot;location_id&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.getLocation().getLocationId()}&lt;/patient_identifier.location_id&gt;
      &lt;patient_identifier.preferred openmrs_attribute=&quot;preferred&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.isPreferred()}&lt;/patient_identifier.preferred&gt;
      &lt;patient_identifier.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{listItem.isVoided()}&lt;/patient_identifier.voided&gt;
    &lt;/patient_identifier&gt;
    &lt;person.birthdate openmrs_attribute=&quot;birthdate&quot; openmrs_table=&quot;person&quot;&gt;$!{date.format($patient.getBirthdate())}&lt;/person.birthdate&gt;
    &lt;person.birthdate_estimated openmrs_attribute=&quot;birthdate_estimated&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getBirthDateEstimated()}&lt;/person.birthdate_estimated&gt;
    &lt;person.dead openmrs_attribute=&quot;dead&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getDead()}&lt;/person.dead&gt;
    &lt;person.death_date openmrs_attribute=&quot;death_date&quot; openmrs_table=&quot;person&quot;&gt;$!{date.format($patient.getDeathDate())}&lt;/person.death_date&gt;
    &lt;person.death_reason openmrs_attribute=&quot;death_reason&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getDeathReason().getConceptId()}^$!{patient.getDeathReason().getName()}&lt;/person.death_reason&gt;
    &lt;person.gender openmrs_attribute=&quot;gender&quot; openmrs_table=&quot;person&quot;&gt;$!{patient.getGender()}&lt;/person.gender&gt;
    &lt;person_address&gt;
      &lt;person_address.address1 openmrs_attribute=&quot;address1&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getAddress1()}&lt;/person_address.address1&gt;
      &lt;person_address.address2 openmrs_attribute=&quot;address2&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getAddress2()}&lt;/person_address.address2&gt;
      &lt;person_address.city_village openmrs_attribute=&quot;city_village&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getCityVillage()}&lt;/person_address.city_village&gt;
      &lt;person_address.country openmrs_attribute=&quot;country&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getCountry()}&lt;/person_address.country&gt;
      &lt;person_address.county_district openmrs_attribute=&quot;county_district&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getCountyDistrict()}&lt;/person_address.county_district&gt;
      &lt;person_address.latitude openmrs_attribute=&quot;latitude&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getLatitude()}&lt;/person_address.latitude&gt;
      &lt;person_address.longitude openmrs_attribute=&quot;longitude&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getLongitude()}&lt;/person_address.longitude&gt;
      &lt;person_address.neighborhood_cell openmrs_attribute=&quot;neighborhood_cell&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getNeighborhoodCell()}&lt;/person_address.neighborhood_cell&gt;
      &lt;person_address.postal_code openmrs_attribute=&quot;postal_code&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getPostalCode()}&lt;/person_address.postal_code&gt;
      &lt;person_address.preferred openmrs_attribute=&quot;preferred&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.isPreferred()}&lt;/person_address.preferred&gt;
      &lt;person_address.region openmrs_attribute=&quot;region&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getRegion()}&lt;/person_address.region&gt;
      &lt;person_address.state_province openmrs_attribute=&quot;state_province&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getStateProvince()}&lt;/person_address.state_province&gt;
      &lt;person_address.subregion openmrs_attribute=&quot;subregion&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getSubregion()}&lt;/person_address.subregion&gt;
      &lt;person_address.township_division openmrs_attribute=&quot;township_division&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.getTownshipDivision()}&lt;/person_address.township_division&gt;
      &lt;person_address.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;person_address&quot;&gt;$!{listItem.isVoided()}&lt;/person_address.voided&gt;
    &lt;/person_address&gt;
    &lt;person_attribute&gt;
      &lt;person_attribute.person_attribute_type_id openmrs_attribute=&quot;person_attribute_type_id&quot; openmrs_table=&quot;person_attribute&quot;&gt;$!{listItem.getAttributeType().getPersonAttributeTypeId()}&lt;/person_attribute.person_attribute_type_id&gt;
      &lt;person_attribute.value openmrs_attribute=&quot;value&quot; openmrs_table=&quot;person_attribute&quot;&gt;$!{listItem.getValue()}&lt;/person_attribute.value&gt;
      &lt;person_attribute.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;person_attribute&quot;&gt;$!{listItem.isVoided()}&lt;/person_attribute.voided&gt;
    &lt;/person_attribute&gt;
    &lt;person_name&gt;
      &lt;person_name.family_name openmrs_attribute=&quot;family_name&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.getFamilyName()}&lt;/person_name.family_name&gt;
      &lt;person_name.given_name openmrs_attribute=&quot;given_name&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.getGivenName()}&lt;/person_name.given_name&gt;
      &lt;person_name.middle_name openmrs_attribute=&quot;middle_name&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.getMiddleName()}&lt;/person_name.middle_name&gt;
      &lt;person_name.preferred openmrs_attribute=&quot;preferred&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.isPreferred()}&lt;/person_name.preferred&gt;
      &lt;person_name.voided openmrs_attribute=&quot;voided&quot; openmrs_table=&quot;person_name&quot;&gt;$!{listItem.isVoided()}&lt;/person_name.voided&gt;
    &lt;/person_name&gt;
  &lt;/all_patient_data&gt;
  &lt;patient&gt;
    &lt;patient.birthdate openmrs_attribute=&quot;birthdate&quot; openmrs_table=&quot;patient&quot;&gt;$!{date.format($patient.getBirthdate())}&lt;/patient.birthdate&gt;
    &lt;patient.birthdate_estimated openmrs_attribute=&quot;birthdate_estimated&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getBirthDateEstimated()}&lt;/patient.birthdate_estimated&gt;
    &lt;patient.family_name openmrs_attribute=&quot;family_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getFamilyName()}&lt;/patient.family_name&gt;
    &lt;patient.given_name openmrs_attribute=&quot;given_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getGivenName()}&lt;/patient.given_name&gt;
    &lt;patient.medical_record_number openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier(3).getIdentifier()}&lt;/patient.medical_record_number&gt;
    &lt;patient.middle_name openmrs_attribute=&quot;middle_name&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getMiddleName()}&lt;/patient.middle_name&gt;
    &lt;patient.mtctplus_id openmrs_attribute=&quot;mtctplus_id&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getPatientIdentifier(2).getIdentifier()}&lt;/patient.mtctplus_id&gt;
    &lt;patient.mtrh_id openmrs_attribute=&quot;mtrh_id&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getPatientIdentifier(1).getIdentifier()}&lt;/patient.mtrh_id&gt;
    &lt;patient.kenyan_national_id_number openmrs_attribute=&quot;KENYAN_NATIONAL_ID_NUMBER&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier(5).getIdentifier()}&lt;/patient.kenyan_national_id_number&gt;
    &lt;patient.patient_id openmrs_attribute=&quot;patient_id&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getPatientId()}&lt;/patient.patient_id&gt;
    &lt;patient.sex openmrs_attribute=&quot;sex&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getGender()}&lt;/patient.sex&gt;
    &lt;patient.tribe openmrs_attribute=&quot;tribe&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getTribe().getTribeId()}^$!{patient.getTribe().getName()}&lt;/patient.tribe&gt;
    &lt;patient_address.address1 openmrs_attribute=&quot;address1&quot; openmrs_table=&quot;patient_address&quot;&gt;$!{patient.getPersonAddress().getAddress1()}&lt;/patient_address.address1&gt;
    &lt;patient_address.sectionhomestead openmrs_attribute=&quot;address2&quot; openmrs_table=&quot;patient_address&quot;&gt;$!{patient.getPersonAddress().getAddress2()}&lt;/patient_address.sectionhomestead&gt;
  &lt;/patient&gt;
  &lt;encounter&gt;
    &lt;encounter.encounter_datetime openmrs_attribute=&quot;encounter_datetime&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.location_id openmrs_attribute=&quot;location_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.provider_id openmrs_attribute=&quot;provider_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
  &lt;/encounter&gt;
  &lt;obs&gt;
    &lt;pay_category multiple=&quot;0&quot; openmrs_concept=&quot;5282^PAY CATEGORY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pay_category&gt;
    &lt;return_visit_date openmrs_concept=&quot;5096^RETURN VISIT DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/return_visit_date&gt;
    &lt;clinic_travel_time multiple=&quot;0&quot; openmrs_concept=&quot;5605^CLINIC TRAVEL TIME^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/clinic_travel_time&gt;
    &lt;attended_school_ever multiple=&quot;0&quot; openmrs_concept=&quot;5606^ATTENDED SCHOOL EVER^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/attended_school_ever&gt;
    &lt;years_of_school_completed openmrs_concept=&quot;5607^YEARS OF SCHOOL COMPLETED^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/years_of_school_completed&gt;
    &lt;employed_outside_home openmrs_concept=&quot;5608^EMPLOYED OUTSIDE HOME^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/employed_outside_home&gt;
    &lt;home_electricity openmrs_concept=&quot;5609^HOME ELECTRICITY^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/home_electricity&gt;
    &lt;home_plumbing openmrs_concept=&quot;5610^HOME PLUMBING^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/home_plumbing&gt;
    &lt;total_people_living_in_home openmrs_concept=&quot;5611^TOTAL PEOPLE LIVING IN HOME^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/total_people_living_in_home&gt;
    &lt;total_children_under_5yo_living_in_home openmrs_concept=&quot;5612^TOTAL CHILDREN UNDER 5YO LIVING IN HOME^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/total_children_under_5yo_living_in_home&gt;
    &lt;hiv_disclosure_to_anyone openmrs_concept=&quot;1048^HIV DISCLOSURE TO ANYONE^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_disclosure_to_anyone&gt;
    &lt;hiv_disclosure_to_anyone_specific multiple=&quot;1&quot; openmrs_concept=&quot;5616^HIV DISCLOSURE TO ANYONE, SPECIFIC^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;partner_or_spouse openmrs_concept=&quot;5617^PARTNER OR SPOUSE^99DCT&quot;&gt;false&lt;/partner_or_spouse&gt;
        &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
        &lt;spouse openmrs_concept=&quot;1669^SPOUSE^99DCT&quot;&gt;false&lt;/spouse&gt;
        &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
        &lt;parent openmrs_concept=&quot;1672^PARENT^99DCT&quot;&gt;false&lt;/parent&gt;
        &lt;friend openmrs_concept=&quot;5618^FRIEND^99DCT&quot;&gt;false&lt;/friend&gt;
        &lt;other_household_member openmrs_concept=&quot;5621^OTHER HOUSEHOLD MEMBER^99DCT&quot;&gt;false&lt;/other_household_member&gt;
        &lt;grandparent openmrs_concept=&quot;973^GRANDPARENT^99DCT&quot;&gt;false&lt;/grandparent&gt;
        &lt;children openmrs_concept=&quot;1671^CHILDREN^99DCT&quot;&gt;false&lt;/children&gt;
        &lt;health_care_provider openmrs_concept=&quot;5619^HEALTH CARE PROVIDER^99DCT&quot;&gt;false&lt;/health_care_provider&gt;
        &lt;other_family_member openmrs_concept=&quot;5620^OTHER FAMILY MEMBER^99DCT&quot;&gt;false&lt;/other_family_member&gt;
        &lt;aunt_or_uncle_or_cousins openmrs_concept=&quot;1673^AUNT OR UNCLE OR COUSINS^99DCT&quot;&gt;false&lt;/aunt_or_uncle_or_cousins&gt;
        &lt;partner openmrs_concept=&quot;1670^PARTNER^99DCT&quot;&gt;false&lt;/partner&gt;
    &lt;/hiv_disclosure_to_anyone_specific&gt;
    &lt;gravida openmrs_concept=&quot;5624^GRAVIDA^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/gravida&gt;
    &lt;parity openmrs_concept=&quot;1053^PARITY^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/parity&gt;
    &lt;total_offspring_living_in_home openmrs_concept=&quot;5675^TOTAL OFFSPRING LIVING IN HOME^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/total_offspring_living_in_home&gt;
    &lt;total_offspring_under_5yo_living_in_home openmrs_concept=&quot;5676^TOTAL OFFSPRING UNDER 5YO LIVING IN HOME^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/total_offspring_under_5yo_living_in_home&gt;
    &lt;total_number_of_children_sired openmrs_concept=&quot;5558^TOTAL NUMBER OF CHILDREN SIRED^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/total_number_of_children_sired&gt;
    &lt;civil_status multiple=&quot;0&quot; openmrs_concept=&quot;1054^CIVIL STATUS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/civil_status&gt;
    &lt;number_of_wives openmrs_concept=&quot;5557^NUMBER OF WIVES^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/number_of_wives&gt;
    &lt;spouse_expired_from_hiv openmrs_concept=&quot;5563^SPOUSE EXPIRED FROM HIV^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/spouse_expired_from_hiv&gt;
    &lt;spouse_year_of_death_from_hiv openmrs_concept=&quot;5625^SPOUSE YEAR OF DEATH FROM HIV^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/spouse_year_of_death_from_hiv&gt;
    &lt;discordant_couple multiple=&quot;0&quot; openmrs_concept=&quot;6096^DISCORDANT COUPLE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/discordant_couple&gt;
    &lt;number_of_sexual_partners openmrs_concept=&quot;5570^NUMBER OF SEXUAL PARTNERS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/number_of_sexual_partners&gt;
    &lt;partner_multiple_sexual_partners openmrs_concept=&quot;5568^PARTNER MULTIPLE SEXUAL PARTNERS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/partner_multiple_sexual_partners&gt;
    &lt;patient_had_sex_in_last_6mo openmrs_concept=&quot;5569^PATIENT HAD SEX IN LAST 6MO^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_had_sex_in_last_6mo&gt;
    &lt;patient_multiple_sexual_partners openmrs_concept=&quot;5567^PATIENT MULTIPLE SEXUAL PARTNERS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_multiple_sexual_partners&gt;
    &lt;method_of_hiv_exposure multiple=&quot;1&quot; openmrs_concept=&quot;1061^METHOD OF HIV EXPOSURE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;unknown openmrs_concept=&quot;1067^UNKNOWN^99DCT&quot;&gt;false&lt;/unknown&gt;
        &lt;suspected_past_hiv_exposure openmrs_concept=&quot;1062^SUSPECTED PAST HIV EXPOSURE^99DCT&quot;&gt;false&lt;/suspected_past_hiv_exposure&gt;
        &lt;intravenous_drug_use openmrs_concept=&quot;105^INTRAVENOUS DRUG USE^99DCT&quot;&gt;false&lt;/intravenous_drug_use&gt;
        &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
        &lt;blood_transfusion openmrs_concept=&quot;1063^BLOOD TRANSFUSION^99DCT&quot;&gt;false&lt;/blood_transfusion&gt;
        &lt;spouses_partner_suspected_hiv openmrs_concept=&quot;5564^SPOUSES PARTNER SUSPECTED HIV+^99DCT&quot;&gt;false&lt;/spouses_partner_suspected_hiv&gt;
        &lt;contaminated_needle_stick openmrs_concept=&quot;181^CONTAMINATED NEEDLE STICK^99DCT&quot;&gt;false&lt;/contaminated_needle_stick&gt;
    &lt;/method_of_hiv_exposure&gt;
    &lt;year_of_blood_transfusion_exposure openmrs_concept=&quot;1089^YEAR OF BLOOD TRANSFUSION EXPOSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/year_of_blood_transfusion_exposure&gt;
    &lt;number_of_weeks_pregnant openmrs_concept=&quot;1279^NUMBER OF WEEKS PREGNANT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/number_of_weeks_pregnant&gt;
    &lt;pregnancy_status openmrs_concept=&quot;5272^PREGNANCY STATUS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/pregnancy_status&gt;
    &lt;currently_using_birth_control openmrs_concept=&quot;965^CURRENTLY USING BIRTH CONTROL^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/currently_using_birth_control&gt;
    &lt;method_of_family_planning multiple=&quot;1&quot; openmrs_concept=&quot;374^METHOD OF FAMILY PLANNING^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;female_sterilization openmrs_concept=&quot;5276^FEMALE STERILIZATION^99DCT&quot;&gt;false&lt;/female_sterilization&gt;
        &lt;intrauterine_device openmrs_concept=&quot;5275^INTRAUTERINE DEVICE^99DCT&quot;&gt;false&lt;/intrauterine_device&gt;
        &lt;diaphragm openmrs_concept=&quot;5278^DIAPHRAGM^99DCT&quot;&gt;false&lt;/diaphragm&gt;
        &lt;oral_contraception openmrs_concept=&quot;780^ORAL CONTRACEPTION^99DCT&quot;&gt;false&lt;/oral_contraception&gt;
        &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
        &lt;condoms openmrs_concept=&quot;190^CONDOMS^99DCT&quot;&gt;false&lt;/condoms&gt;
        &lt;injectable_contraceptives openmrs_concept=&quot;5279^INJECTABLE CONTRACEPTIVES^99DCT&quot;&gt;false&lt;/injectable_contraceptives&gt;
        &lt;natural_family_planning openmrs_concept=&quot;5277^NATURAL FAMILY PLANNING^99DCT&quot;&gt;false&lt;/natural_family_planning&gt;
    &lt;/method_of_family_planning&gt;
    &lt;chief_complaint multiple=&quot;1&quot; openmrs_concept=&quot;5219^CHIEF COMPLAINT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;asymptomatic openmrs_concept=&quot;5006^ASYMPTOMATIC^99DCT&quot;&gt;false&lt;/asymptomatic&gt;
        &lt;symptomatic openmrs_concept=&quot;1068^SYMPTOMATIC^99DCT&quot;&gt;false&lt;/symptomatic&gt;
    &lt;/chief_complaint&gt;
    &lt;review_of_systems_general multiple=&quot;1&quot; openmrs_concept=&quot;1069^REVIEW OF SYSTEMS, GENERAL^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;congenital_disorders openmrs_concept=&quot;81^CONGENITAL DISORDERS^99DCT&quot;&gt;false&lt;/congenital_disorders&gt;
        &lt;history_of_jaundice openmrs_concept=&quot;5986^HISTORY OF JAUNDICE^99DCT&quot;&gt;false&lt;/history_of_jaundice&gt;
        &lt;negative openmrs_concept=&quot;664^NEGATIVE^99DCT&quot;&gt;false&lt;/negative&gt;
        &lt;weight_gain openmrs_concept=&quot;5544^WEIGHT GAIN^99DCT&quot;&gt;false&lt;/weight_gain&gt;
        &lt;delayed_milestones openmrs_concept=&quot;6022^DELAYED MILESTONES^99DCT&quot;&gt;false&lt;/delayed_milestones&gt;
        &lt;chills openmrs_concept=&quot;871^CHILLS^99DCT&quot;&gt;false&lt;/chills&gt;
        &lt;fever openmrs_concept=&quot;5945^FEVER^99DCT&quot;&gt;false&lt;/fever&gt;
        &lt;poor_weight_gain openmrs_concept=&quot;1396^POOR WEIGHT GAIN^99DCT&quot;&gt;false&lt;/poor_weight_gain&gt;
        &lt;irritability openmrs_concept=&quot;6023^IRRITABILITY^99DCT&quot;&gt;false&lt;/irritability&gt;
        &lt;weight_loss openmrs_concept=&quot;832^WEIGHT LOSS^99DCT&quot;&gt;false&lt;/weight_loss&gt;
        &lt;fatigue openmrs_concept=&quot;5949^FATIGUE^99DCT&quot;&gt;false&lt;/fatigue&gt;
        &lt;night_sweats openmrs_concept=&quot;6029^NIGHT SWEATS^99DCT&quot;&gt;false&lt;/night_sweats&gt;
        &lt;rash openmrs_concept=&quot;512^RASH^99DCT&quot;&gt;false&lt;/rash&gt;
    &lt;/review_of_systems_general&gt;
    &lt;review_of_systems_heent multiple=&quot;1&quot; openmrs_concept=&quot;1070^REVIEW OF SYSTEMS, HEENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;vision_difficulties openmrs_concept=&quot;5953^VISION DIFFICULTIES^99DCT&quot;&gt;false&lt;/vision_difficulties&gt;
        &lt;hearing_difficulties openmrs_concept=&quot;861^HEARING DIFFICULTIES^99DCT&quot;&gt;false&lt;/hearing_difficulties&gt;
        &lt;candidiasis_oral openmrs_concept=&quot;5334^CANDIDIASIS, ORAL^99DCT&quot;&gt;false&lt;/candidiasis_oral&gt;
        &lt;nasal_discharge openmrs_concept=&quot;6016^NASAL DISCHARGE^99DCT&quot;&gt;false&lt;/nasal_discharge&gt;
        &lt;swallowing_difficulties openmrs_concept=&quot;5954^SWALLOWING DIFFICULTIES^99DCT&quot;&gt;false&lt;/swallowing_difficulties&gt;
        &lt;otorrhea openmrs_concept=&quot;873^OTORRHEA^99DCT&quot;&gt;false&lt;/otorrhea&gt;
        &lt;oral_sores openmrs_concept=&quot;5244^ORAL SORES^99DCT&quot;&gt;false&lt;/oral_sores&gt;
        &lt;negative openmrs_concept=&quot;664^NEGATIVE^99DCT&quot;&gt;false&lt;/negative&gt;
    &lt;/review_of_systems_heent&gt;
    &lt;chest_pain_duration multiple=&quot;0&quot; openmrs_concept=&quot;5971^CHEST PAIN DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/chest_pain_duration&gt;
    &lt;chest_pain_location multiple=&quot;1&quot; openmrs_concept=&quot;5976^CHEST PAIN LOCATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;left openmrs_concept=&quot;5139^LEFT^99DCT&quot;&gt;false&lt;/left&gt;
        &lt;pleuritic openmrs_concept=&quot;5972^PLEURITIC^99DCT&quot;&gt;false&lt;/pleuritic&gt;
        &lt;posterior openmrs_concept=&quot;541^POSTERIOR^99DCT&quot;&gt;false&lt;/posterior&gt;
        &lt;right openmrs_concept=&quot;5141^RIGHT^99DCT&quot;&gt;false&lt;/right&gt;
        &lt;substernal openmrs_concept=&quot;5973^SUBSTERNAL^99DCT&quot;&gt;false&lt;/substernal&gt;
        &lt;anterior openmrs_concept=&quot;540^ANTERIOR^99DCT&quot;&gt;false&lt;/anterior&gt;
    &lt;/chest_pain_location&gt;
    &lt;chest_pain_quality multiple=&quot;1&quot; openmrs_concept=&quot;909^CHEST PAIN QUALITY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;pleuritic openmrs_concept=&quot;5972^PLEURITIC^99DCT&quot;&gt;false&lt;/pleuritic&gt;
        &lt;pressure_sensation openmrs_concept=&quot;705^PRESSURE SENSATION^99DCT&quot;&gt;false&lt;/pressure_sensation&gt;
        &lt;sharp_sensation openmrs_concept=&quot;762^SHARP SENSATION^99DCT&quot;&gt;false&lt;/sharp_sensation&gt;
        &lt;burning_sensation openmrs_concept=&quot;379^BURNING SENSATION^99DCT&quot;&gt;false&lt;/burning_sensation&gt;
    &lt;/chest_pain_quality&gt;
    &lt;cough_duration multiple=&quot;0&quot; openmrs_concept=&quot;5959^COUGH DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cough_duration&gt;
    &lt;productive_cough_quality multiple=&quot;0&quot; openmrs_concept=&quot;5958^PRODUCTIVE COUGH QUALITY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/productive_cough_quality&gt;
    &lt;review_of_systems_cardiopulmonary multiple=&quot;1&quot; openmrs_concept=&quot;1071^REVIEW OF SYSTEMS, CARDIOPULMONARY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;negative openmrs_concept=&quot;664^NEGATIVE^99DCT&quot;&gt;false&lt;/negative&gt;
        &lt;history_of_pneumonia openmrs_concept=&quot;1145^HISTORY OF PNEUMONIA^99DCT&quot;&gt;false&lt;/history_of_pneumonia&gt;
        &lt;shortness_of_breath_with_exertion openmrs_concept=&quot;5963^SHORTNESS OF BREATH WITH EXERTION^99DCT&quot;&gt;false&lt;/shortness_of_breath_with_exertion&gt;
        &lt;shortness_of_breath openmrs_concept=&quot;5960^SHORTNESS OF BREATH^99DCT&quot;&gt;false&lt;/shortness_of_breath&gt;
        &lt;cough openmrs_concept=&quot;107^COUGH^99DCT&quot;&gt;false&lt;/cough&gt;
        &lt;tachypnea openmrs_concept=&quot;801^TACHYPNEA^99DCT&quot;&gt;false&lt;/tachypnea&gt;
        &lt;shortness_of_breath_at_rest openmrs_concept=&quot;5961^SHORTNESS OF BREATH AT REST^99DCT&quot;&gt;false&lt;/shortness_of_breath_at_rest&gt;
        &lt;productive_cough openmrs_concept=&quot;5957^PRODUCTIVE COUGH^99DCT&quot;&gt;false&lt;/productive_cough&gt;
        &lt;tuberculosis openmrs_concept=&quot;58^TUBERCULOSIS^99DCT&quot;&gt;false&lt;/tuberculosis&gt;
        &lt;chest_pain openmrs_concept=&quot;136^CHEST PAIN^99DCT&quot;&gt;false&lt;/chest_pain&gt;
    &lt;/review_of_systems_cardiopulmonary&gt;
    &lt;shortness_of_breath_duration multiple=&quot;0&quot; openmrs_concept=&quot;5962^SHORTNESS OF BREATH DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/shortness_of_breath_duration&gt;
    &lt;tuberculosis_treatment_completion_year openmrs_concept=&quot;5966^TUBERCULOSIS TREATMENT COMPLETION YEAR^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_treatment_completion_year&gt;
    &lt;tuberculosis_treatment_status openmrs_concept=&quot;5965^TUBERCULOSIS TREATMENT STATUS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_treatment_status&gt;
    &lt;diarrhea_duration multiple=&quot;0&quot; openmrs_concept=&quot;5984^DIARRHEA DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/diarrhea_duration&gt;
    &lt;nausea_duration multiple=&quot;0&quot; openmrs_concept=&quot;5979^NAUSEA DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/nausea_duration&gt;
    &lt;review_of_systems_gastrointestinal multiple=&quot;1&quot; openmrs_concept=&quot;1078^REVIEW OF SYSTEMS, GASTROINTESTINAL^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;refusal_to_feed openmrs_concept=&quot;6017^REFUSAL TO FEED^99DCT&quot;&gt;false&lt;/refusal_to_feed&gt;
        &lt;abdominal_pain openmrs_concept=&quot;151^ABDOMINAL PAIN^99DCT&quot;&gt;false&lt;/abdominal_pain&gt;
        &lt;nausea openmrs_concept=&quot;5978^NAUSEA^99DCT&quot;&gt;false&lt;/nausea&gt;
        &lt;history_of_jaundice openmrs_concept=&quot;5986^HISTORY OF JAUNDICE^99DCT&quot;&gt;false&lt;/history_of_jaundice&gt;
        &lt;poor_appetite openmrs_concept=&quot;6031^POOR APPETITE^99DCT&quot;&gt;false&lt;/poor_appetite&gt;
        &lt;negative openmrs_concept=&quot;664^NEGATIVE^99DCT&quot;&gt;false&lt;/negative&gt;
        &lt;diarrhea openmrs_concept=&quot;16^DIARRHEA^99DCT&quot;&gt;false&lt;/diarrhea&gt;
        &lt;hepatic_disease openmrs_concept=&quot;6032^HEPATIC DISEASE^99DCT&quot;&gt;false&lt;/hepatic_disease&gt;
        &lt;vomiting openmrs_concept=&quot;5980^VOMITING^99DCT&quot;&gt;false&lt;/vomiting&gt;
        &lt;abdominal_swelling openmrs_concept=&quot;6019^ABDOMINAL SWELLING^99DCT&quot;&gt;false&lt;/abdominal_swelling&gt;
    &lt;/review_of_systems_gastrointestinal&gt;
    &lt;vomiting_duration multiple=&quot;0&quot; openmrs_concept=&quot;5981^VOMITING DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/vomiting_duration&gt;
    &lt;month_of_current_gestation openmrs_concept=&quot;5992^MONTH OF CURRENT GESTATION^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/month_of_current_gestation&gt;
    &lt;review_of_systems_genitourinary multiple=&quot;1&quot; openmrs_concept=&quot;1080^REVIEW OF SYSTEMS, GENITOURINARY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;oliguria openmrs_concept=&quot;6021^OLIGURIA^99DCT&quot;&gt;false&lt;/oliguria&gt;
        &lt;hematuria openmrs_concept=&quot;840^HEMATURIA^99DCT&quot;&gt;false&lt;/hematuria&gt;
        &lt;menopausal openmrs_concept=&quot;5990^MENOPAUSAL^99DCT&quot;&gt;false&lt;/menopausal&gt;
        &lt;negative openmrs_concept=&quot;664^NEGATIVE^99DCT&quot;&gt;false&lt;/negative&gt;
        &lt;urethral_discharge openmrs_concept=&quot;5995^URETHRAL DISCHARGE^99DCT&quot;&gt;false&lt;/urethral_discharge&gt;
        &lt;urinary_tract_infection openmrs_concept=&quot;55^URINARY TRACT INFECTION^99DCT&quot;&gt;false&lt;/urinary_tract_infection&gt;
        &lt;menstruating openmrs_concept=&quot;5989^MENSTRUATING^99DCT&quot;&gt;false&lt;/menstruating&gt;
        &lt;renal_disease openmrs_concept=&quot;6033^RENAL DISEASE^99DCT&quot;&gt;false&lt;/renal_disease&gt;
        &lt;dysuria openmrs_concept=&quot;6020^DYSURIA^99DCT&quot;&gt;false&lt;/dysuria&gt;
        &lt;vaginal_discharge openmrs_concept=&quot;5993^VAGINAL DISCHARGE^99DCT&quot;&gt;false&lt;/vaginal_discharge&gt;
    &lt;/review_of_systems_genitourinary&gt;
    &lt;urethral_discharge_duration multiple=&quot;0&quot; openmrs_concept=&quot;5996^URETHRAL DISCHARGE DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/urethral_discharge_duration&gt;
    &lt;vaginal_discharge_duration multiple=&quot;0&quot; openmrs_concept=&quot;5994^VAGINAL DISCHARGE DURATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/vaginal_discharge_duration&gt;
    &lt;review_of_systems_musculoskeletal multiple=&quot;1&quot; openmrs_concept=&quot;1081^REVIEW OF SYSTEMS, MUSCULOSKELETAL^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;edema_legs openmrs_concept=&quot;590^EDEMA, LEGS^99DCT&quot;&gt;false&lt;/edema_legs&gt;
        &lt;pain_lower_extremities openmrs_concept=&quot;6035^PAIN, LOWER EXTREMITIES^99DCT&quot;&gt;false&lt;/pain_lower_extremities&gt;
        &lt;muscle_pain openmrs_concept=&quot;6034^MUSCLE PAIN^99DCT&quot;&gt;false&lt;/muscle_pain&gt;
        &lt;negative openmrs_concept=&quot;664^NEGATIVE^99DCT&quot;&gt;false&lt;/negative&gt;
        &lt;joint_pain openmrs_concept=&quot;80^JOINT PAIN^99DCT&quot;&gt;false&lt;/joint_pain&gt;
        &lt;joint_swelling openmrs_concept=&quot;5312^JOINT SWELLING^99DCT&quot;&gt;false&lt;/joint_swelling&gt;
    &lt;/review_of_systems_musculoskeletal&gt;
    &lt;review_of_systems_central_nervous_system multiple=&quot;1&quot; openmrs_concept=&quot;1082^REVIEW OF SYSTEMS, CENTRAL NERVOUS SYSTEM^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;paresthesia openmrs_concept=&quot;6004^PARESTHESIA^99DCT&quot;&gt;false&lt;/paresthesia&gt;
        &lt;confusion openmrs_concept=&quot;6006^CONFUSION^99DCT&quot;&gt;false&lt;/confusion&gt;
        &lt;seizure openmrs_concept=&quot;206^SEIZURE^99DCT&quot;&gt;false&lt;/seizure&gt;
        &lt;headache openmrs_concept=&quot;620^HEADACHE^99DCT&quot;&gt;false&lt;/headache&gt;
        &lt;focal_weakness openmrs_concept=&quot;6005^FOCAL WEAKNESS^99DCT&quot;&gt;false&lt;/focal_weakness&gt;
        &lt;memory_problems openmrs_concept=&quot;6037^MEMORY PROBLEMS^99DCT&quot;&gt;false&lt;/memory_problems&gt;
        &lt;negative openmrs_concept=&quot;664^NEGATIVE^99DCT&quot;&gt;false&lt;/negative&gt;
        &lt;depression openmrs_concept=&quot;207^DEPRESSION^99DCT&quot;&gt;false&lt;/depression&gt;
        &lt;mental_disorders openmrs_concept=&quot;77^MENTAL DISORDERS^99DCT&quot;&gt;false&lt;/mental_disorders&gt;
    &lt;/review_of_systems_central_nervous_system&gt;
    &lt;hospitalized_previous_year openmrs_concept=&quot;5703^HOSPITALIZED PREVIOUS YEAR^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/hospitalized_previous_year&gt;
    &lt;number_of_hospitalizations_in_past_year openmrs_concept=&quot;5704^NUMBER OF HOSPITALIZATIONS IN PAST YEAR^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/number_of_hospitalizations_in_past_year&gt;
    &lt;allergy_to_other_medicine openmrs_concept=&quot;1083^ALLERGY TO OTHER MEDICINE^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/allergy_to_other_medicine&gt;
    &lt;allergy_to_penicillin openmrs_concept=&quot;6011^ALLERGY TO PENICILLIN^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/allergy_to_penicillin&gt;
    &lt;allergy_to_sulfa openmrs_concept=&quot;6012^ALLERGY TO SULFA^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/allergy_to_sulfa&gt;
    &lt;history_of_exposure_to_antiretroviral_drugs openmrs_concept=&quot;5706^HISTORY OF EXPOSURE TO ANTIRETROVIRAL DRUGS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/history_of_exposure_to_antiretroviral_drugs&gt;
    &lt;tuberculosis_drug_treatment_start_date openmrs_concept=&quot;1113^TUBERCULOSIS DRUG TREATMENT START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_drug_treatment_start_date&gt;
    &lt;audit-3_overall_frequency multiple=&quot;0&quot; openmrs_concept=&quot;5319^AUDIT-3 OVERALL FREQUENCY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/audit-3_overall_frequency&gt;
    &lt;audit-3_six_or_more_drinks multiple=&quot;0&quot; openmrs_concept=&quot;5321^AUDIT-3 SIX OR MORE DRINKS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/audit-3_six_or_more_drinks&gt;
    &lt;audit-3_typical_day multiple=&quot;0&quot; openmrs_concept=&quot;5320^AUDIT-3 TYPICAL DAY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/audit-3_typical_day&gt;
    &lt;blood_oxygen_saturation openmrs_concept=&quot;5092^BLOOD OXYGEN SATURATION^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/blood_oxygen_saturation&gt;
    &lt;diastolic_blood_pressure openmrs_concept=&quot;5086^DIASTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/diastolic_blood_pressure&gt;
    &lt;height_cm openmrs_concept=&quot;5090^HEIGHT (CM)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/height_cm&gt;
    &lt;karnofsky_performance_score openmrs_concept=&quot;5283^KARNOFSKY PERFORMANCE SCORE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/karnofsky_performance_score&gt;
    &lt;pulse openmrs_concept=&quot;5087^PULSE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pulse&gt;
    &lt;respiratory_rate openmrs_concept=&quot;5242^RESPIRATORY RATE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/respiratory_rate&gt;
    &lt;systolic_blood_pressure openmrs_concept=&quot;5085^SYSTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/systolic_blood_pressure&gt;
    &lt;temperature_c openmrs_concept=&quot;5088^TEMPERATURE (C)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/temperature_c&gt;
    &lt;weight_kg openmrs_concept=&quot;5089^WEIGHT (KG)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/weight_kg&gt;
    &lt;general_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1119^GENERAL EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;gluteal_wasting openmrs_concept=&quot;5243^GLUTEAL WASTING^99DCT&quot;&gt;false&lt;/gluteal_wasting&gt;
        &lt;lymphadenopathy openmrs_concept=&quot;161^LYMPHADENOPATHY^99DCT&quot;&gt;false&lt;/lymphadenopathy&gt;
        &lt;oedema openmrs_concept=&quot;460^OEDEMA^99DCT&quot;&gt;false&lt;/oedema&gt;
        &lt;pallor openmrs_concept=&quot;5245^PALLOR^99DCT&quot;&gt;false&lt;/pallor&gt;
        &lt;poor_weight_gain openmrs_concept=&quot;1396^POOR WEIGHT GAIN^99DCT&quot;&gt;false&lt;/poor_weight_gain&gt;
        &lt;oral_sores openmrs_concept=&quot;5244^ORAL SORES^99DCT&quot;&gt;false&lt;/oral_sores&gt;
        &lt;temporal_wasting openmrs_concept=&quot;5201^TEMPORAL WASTING^99DCT&quot;&gt;false&lt;/temporal_wasting&gt;
        &lt;jaundice openmrs_concept=&quot;215^JAUNDICE^99DCT&quot;&gt;false&lt;/jaundice&gt;
    &lt;/general_exam_findings&gt;
    &lt;skin_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1120^SKIN EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;rash openmrs_concept=&quot;512^RASH^99DCT&quot;&gt;false&lt;/rash&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;kaposi_apos_s_sarcoma openmrs_concept=&quot;507^KAPOSI&apos;S SARCOMA^99DCT&quot;&gt;false&lt;/kaposi_apos_s_sarcoma&gt;
    &lt;/skin_exam_findings&gt;
    &lt;lymph_node_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1121^LYMPH NODE EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;submandibular openmrs_concept=&quot;504^SUBMANDIBULAR^99DCT&quot;&gt;false&lt;/submandibular&gt;
        &lt;cervical openmrs_concept=&quot;643^CERVICAL^99DCT&quot;&gt;false&lt;/cervical&gt;
        &lt;axillary openmrs_concept=&quot;5112^AXILLARY^99DCT&quot;&gt;false&lt;/axillary&gt;
        &lt;inguinal openmrs_concept=&quot;506^INGUINAL^99DCT&quot;&gt;false&lt;/inguinal&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;supraclavicular openmrs_concept=&quot;505^SUPRACLAVICULAR^99DCT&quot;&gt;false&lt;/supraclavicular&gt;
    &lt;/lymph_node_exam_findings&gt;
    &lt;heent_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1122^HEENT EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;candidiasis_oral openmrs_concept=&quot;5334^CANDIDIASIS, ORAL^99DCT&quot;&gt;false&lt;/candidiasis_oral&gt;
        &lt;tympanic_membrane_injected openmrs_concept=&quot;948^TYMPANIC MEMBRANE INJECTED^99DCT&quot;&gt;false&lt;/tympanic_membrane_injected&gt;
        &lt;fundal_abnormality openmrs_concept=&quot;518^FUNDAL ABNORMALITY^99DCT&quot;&gt;false&lt;/fundal_abnormality&gt;
        &lt;icteric_sclera openmrs_concept=&quot;5192^ICTERIC SCLERA^99DCT&quot;&gt;false&lt;/icteric_sclera&gt;
        &lt;otorrhea openmrs_concept=&quot;873^OTORRHEA^99DCT&quot;&gt;false&lt;/otorrhea&gt;
        &lt;nuchal_rigidity openmrs_concept=&quot;5170^NUCHAL RIGIDITY^99DCT&quot;&gt;false&lt;/nuchal_rigidity&gt;
        &lt;dental_caries openmrs_concept=&quot;131^DENTAL CARIES^99DCT&quot;&gt;false&lt;/dental_caries&gt;
        &lt;cerumen_impaction openmrs_concept=&quot;530^CERUMEN IMPACTION^99DCT&quot;&gt;false&lt;/cerumen_impaction&gt;
        &lt;kaposi_sarcoma_oral openmrs_concept=&quot;644^KAPOSI SARCOMA ORAL^99DCT&quot;&gt;false&lt;/kaposi_sarcoma_oral&gt;
        &lt;deviated_trachea openmrs_concept=&quot;513^DEVIATED TRACHEA^99DCT&quot;&gt;false&lt;/deviated_trachea&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;tonsil_enlarged openmrs_concept=&quot;536^TONSIL ENLARGED^99DCT&quot;&gt;false&lt;/tonsil_enlarged&gt;
        &lt;nasal_discharge openmrs_concept=&quot;6016^NASAL DISCHARGE^99DCT&quot;&gt;false&lt;/nasal_discharge&gt;
        &lt;pale_conjunctiva openmrs_concept=&quot;516^PALE CONJUNCTIVA^99DCT&quot;&gt;false&lt;/pale_conjunctiva&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
    &lt;/heent_exam_findings&gt;
    &lt;chest_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1123^CHEST EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;diminished_breath_sounds openmrs_concept=&quot;5115^DIMINISHED BREATH SOUNDS^99DCT&quot;&gt;false&lt;/diminished_breath_sounds&gt;
        &lt;left openmrs_concept=&quot;5139^LEFT^99DCT&quot;&gt;false&lt;/left&gt;
        &lt;rhonchi openmrs_concept=&quot;5181^RHONCHI^99DCT&quot;&gt;false&lt;/rhonchi&gt;
        &lt;crepitations openmrs_concept=&quot;5127^CREPITATIONS^99DCT&quot;&gt;false&lt;/crepitations&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;bronchial_breath_sounds openmrs_concept=&quot;5116^BRONCHIAL BREATH SOUNDS^99DCT&quot;&gt;false&lt;/bronchial_breath_sounds&gt;
        &lt;right openmrs_concept=&quot;5141^RIGHT^99DCT&quot;&gt;false&lt;/right&gt;
        &lt;dullness_to_percussion openmrs_concept=&quot;5138^DULLNESS TO PERCUSSION^99DCT&quot;&gt;false&lt;/dullness_to_percussion&gt;
        &lt;wheeze openmrs_concept=&quot;5209^WHEEZE^99DCT&quot;&gt;false&lt;/wheeze&gt;
        &lt;left_lower_lobe openmrs_concept=&quot;5134^LEFT LOWER LOBE^99DCT&quot;&gt;false&lt;/left_lower_lobe&gt;
        &lt;right_lower_lobe openmrs_concept=&quot;639^RIGHT LOWER LOBE^99DCT&quot;&gt;false&lt;/right_lower_lobe&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
    &lt;/chest_exam_findings&gt;
    &lt;cardiac_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1124^CARDIAC EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;cardiac_murmur openmrs_concept=&quot;562^CARDIAC MURMUR^99DCT&quot;&gt;false&lt;/cardiac_murmur&gt;
        &lt;diastolic_descresendo_murmur openmrs_concept=&quot;5160^DIASTOLIC DESCRESENDO MURMUR^99DCT&quot;&gt;false&lt;/diastolic_descresendo_murmur&gt;
        &lt;s3_gallop openmrs_concept=&quot;550^S3 GALLOP^99DCT&quot;&gt;false&lt;/s3_gallop&gt;
        &lt;abnormal_sounds openmrs_concept=&quot;1117^ABNORMAL SOUNDS^99DCT&quot;&gt;false&lt;/abnormal_sounds&gt;
        &lt;holosystolic_murmur openmrs_concept=&quot;5162^HOLOSYSTOLIC MURMUR^99DCT&quot;&gt;false&lt;/holosystolic_murmur&gt;
        &lt;pericardial_friction_rub openmrs_concept=&quot;5176^PERICARDIAL FRICTION RUB^99DCT&quot;&gt;false&lt;/pericardial_friction_rub&gt;
        &lt;left_ventricular_lift openmrs_concept=&quot;5156^LEFT VENTRICULAR LIFT^99DCT&quot;&gt;false&lt;/left_ventricular_lift&gt;
        &lt;systolic_ejection_murmur openmrs_concept=&quot;5166^SYSTOLIC EJECTION MURMUR^99DCT&quot;&gt;false&lt;/systolic_ejection_murmur&gt;
        &lt;diastolic_rumble openmrs_concept=&quot;5164^DIASTOLIC RUMBLE^99DCT&quot;&gt;false&lt;/diastolic_rumble&gt;
        &lt;right_ventricular_lift openmrs_concept=&quot;5157^RIGHT VENTRICULAR LIFT^99DCT&quot;&gt;false&lt;/right_ventricular_lift&gt;
        &lt;evidence_of_cardiac_enlargement openmrs_concept=&quot;5158^EVIDENCE OF CARDIAC ENLARGEMENT^99DCT&quot;&gt;false&lt;/evidence_of_cardiac_enlargement&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
    &lt;/cardiac_exam_findings&gt;
    &lt;abdominal_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1125^ABDOMINAL EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;mass_abdominal openmrs_concept=&quot;5103^MASS, ABDOMINAL^99DCT&quot;&gt;false&lt;/mass_abdominal&gt;
        &lt;ascites openmrs_concept=&quot;581^ASCITES^99DCT&quot;&gt;false&lt;/ascites&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;splenomegaly openmrs_concept=&quot;5009^SPLENOMEGALY^99DCT&quot;&gt;false&lt;/splenomegaly&gt;
        &lt;abdominal_tenderness openmrs_concept=&quot;5105^ABDOMINAL TENDERNESS^99DCT&quot;&gt;false&lt;/abdominal_tenderness&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;hepatomegaly openmrs_concept=&quot;5008^HEPATOMEGALY^99DCT&quot;&gt;false&lt;/hepatomegaly&gt;
    &lt;/abdominal_exam_findings&gt;
    &lt;liver_size openmrs_concept=&quot;5153^LIVER SIZE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/liver_size&gt;
    &lt;spleen_size openmrs_concept=&quot;5195^SPLEEN SIZE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/spleen_size&gt;
    &lt;urogenital_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1126^UROGENITAL EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;not_done openmrs_concept=&quot;1118^NOT DONE^99DCT&quot;&gt;false&lt;/not_done&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
    &lt;/urogenital_exam_findings&gt;
    &lt;extremity_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1127^EXTREMITY EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;cellulitis openmrs_concept=&quot;134^CELLULITIS^99DCT&quot;&gt;false&lt;/cellulitis&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;edema_legs openmrs_concept=&quot;590^EDEMA, LEGS^99DCT&quot;&gt;false&lt;/edema_legs&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;kaposi_apos_s_sarcoma openmrs_concept=&quot;507^KAPOSI&apos;S SARCOMA^99DCT&quot;&gt;false&lt;/kaposi_apos_s_sarcoma&gt;
        &lt;varicose_leg_ulcers openmrs_concept=&quot;951^VARICOSE LEG ULCERS^99DCT&quot;&gt;false&lt;/varicose_leg_ulcers&gt;
        &lt;vitamin_d_deficiency openmrs_concept=&quot;888^VITAMIN D DEFICIENCY^99DCT&quot;&gt;false&lt;/vitamin_d_deficiency&gt;
    &lt;/extremity_exam_findings&gt;
    &lt;musculoskeletal_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1128^MUSCULOSKELETAL EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;joint_swelling openmrs_concept=&quot;5312^JOINT SWELLING^99DCT&quot;&gt;false&lt;/joint_swelling&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;muscle_tenderness openmrs_concept=&quot;5313^MUSCLE TENDERNESS^99DCT&quot;&gt;false&lt;/muscle_tenderness&gt;
    &lt;/musculoskeletal_exam_findings&gt;
    &lt;neurologic_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1129^NEUROLOGIC EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;decreased_sensation openmrs_concept=&quot;5135^DECREASED SENSATION^99DCT&quot;&gt;false&lt;/decreased_sensation&gt;
        &lt;focal_weakness openmrs_concept=&quot;6005^FOCAL WEAKNESS^99DCT&quot;&gt;false&lt;/focal_weakness&gt;
        &lt;asymmetric_reflexes openmrs_concept=&quot;1199^ASYMMETRIC REFLEXES^99DCT&quot;&gt;false&lt;/asymmetric_reflexes&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;seizure openmrs_concept=&quot;206^SEIZURE^99DCT&quot;&gt;false&lt;/seizure&gt;
        &lt;abnormal_gait openmrs_concept=&quot;5108^ABNORMAL GAIT^99DCT&quot;&gt;false&lt;/abnormal_gait&gt;
        &lt;abnormal_tone openmrs_concept=&quot;5264^ABNORMAL TONE^99DCT&quot;&gt;false&lt;/abnormal_tone&gt;
        &lt;irritability openmrs_concept=&quot;6023^IRRITABILITY^99DCT&quot;&gt;false&lt;/irritability&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;cranial_nerve_abnormalities openmrs_concept=&quot;599^CRANIAL NERVE ABNORMALITIES^99DCT&quot;&gt;false&lt;/cranial_nerve_abnormalities&gt;
    &lt;/neurologic_exam_findings&gt;
    &lt;psychiatric_exam_findings multiple=&quot;1&quot; openmrs_concept=&quot;1130^PSYCHIATRIC EXAM FINDINGS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;apathetic openmrs_concept=&quot;5265^APATHETIC^99DCT&quot;&gt;false&lt;/apathetic&gt;
        &lt;depression openmrs_concept=&quot;207^DEPRESSION^99DCT&quot;&gt;false&lt;/depression&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;confusion openmrs_concept=&quot;6006^CONFUSION^99DCT&quot;&gt;false&lt;/confusion&gt;
        &lt;dementia openmrs_concept=&quot;5136^DEMENTIA^99DCT&quot;&gt;false&lt;/dementia&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
    &lt;/psychiatric_exam_findings&gt;
    &lt;adult_who_condition_query multiple=&quot;1&quot; openmrs_concept=&quot;6048^ADULT WHO CONDITION QUERY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;encephalopathy openmrs_concept=&quot;5345^ENCEPHALOPATHY^99DCT&quot;&gt;false&lt;/encephalopathy&gt;
        &lt;wasting_syndrome openmrs_concept=&quot;823^WASTING SYNDROME^99DCT&quot;&gt;false&lt;/wasting_syndrome&gt;
        &lt;progressive_multifocal_leukoencephalopathy openmrs_concept=&quot;5046^PROGRESSIVE MULTIFOCAL LEUKOENCEPHALOPATHY^99DCT&quot;&gt;false&lt;/progressive_multifocal_leukoencephalopathy&gt;
        &lt;hiv_staging_-_persistent_generalized_lymphadenopathy openmrs_concept=&quot;5328^HIV STAGING - PERSISTENT GENERALIZED LYMPHADENOPATHY^99DCT&quot;&gt;false&lt;/hiv_staging_-_persistent_generalized_lymphadenopathy&gt;
        &lt;toxoplasmosis_central_nervous_system openmrs_concept=&quot;990^TOXOPLASMOSIS, CENTRAL NERVOUS SYSTEM^99DCT&quot;&gt;false&lt;/toxoplasmosis_central_nervous_system&gt;
        &lt;hiv_staging_-_weight_loss_greater_than_ten_percent openmrs_concept=&quot;5339^HIV STAGING - WEIGHT LOSS GREATER THAN TEN PERCENT^99DCT&quot;&gt;false&lt;/hiv_staging_-_weight_loss_greater_than_ten_percent&gt;
        &lt;hiv_staging_-_cryptosporidiosis openmrs_concept=&quot;5034^HIV STAGING - CRYPTOSPORIDIOSIS^99DCT&quot;&gt;false&lt;/hiv_staging_-_cryptosporidiosis&gt;
        &lt;diarrhea_chronic openmrs_concept=&quot;5018^DIARRHEA, CHRONIC^99DCT&quot;&gt;false&lt;/diarrhea_chronic&gt;
        &lt;hiv_staging_-_mycobacterium_other openmrs_concept=&quot;5043^HIV STAGING - MYCOBACTERIUM, OTHER^99DCT&quot;&gt;false&lt;/hiv_staging_-_mycobacterium_other&gt;
        &lt;hiv_staging_-_lymphoma openmrs_concept=&quot;5041^HIV STAGING - LYMPHOMA^99DCT&quot;&gt;false&lt;/hiv_staging_-_lymphoma&gt;
        &lt;hiv_staging_-_salmonella_septicemia openmrs_concept=&quot;5354^HIV STAGING - SALMONELLA SEPTICEMIA^99DCT&quot;&gt;false&lt;/hiv_staging_-_salmonella_septicemia&gt;
        &lt;asymptomatic_hiv_infection openmrs_concept=&quot;5327^ASYMPTOMATIC HIV INFECTION^99DCT&quot;&gt;false&lt;/asymptomatic_hiv_infection&gt;
        &lt;hiv_staging_-_cryptococcosis_extrapulmonary openmrs_concept=&quot;5033^HIV STAGING - CRYPTOCOCCOSIS, EXTRAPULMONARY^99DCT&quot;&gt;false&lt;/hiv_staging_-_cryptococcosis_extrapulmonary&gt;
        &lt;hiv_staging_-_serious_bacterial_infections openmrs_concept=&quot;5030^HIV STAGING - SERIOUS BACTERIAL INFECTIONS^99DCT&quot;&gt;false&lt;/hiv_staging_-_serious_bacterial_infections&gt;
        &lt;hiv_staging_-_candidiasis_ororespiratory_tract openmrs_concept=&quot;5340^HIV STAGING  - CANDIDIASIS, ORORESPIRATORY TRACT^99DCT&quot;&gt;false&lt;/hiv_staging_-_candidiasis_ororespiratory_tract&gt;
        &lt;oral_hairy_leukoplakia openmrs_concept=&quot;5337^ORAL HAIRY LEUKOPLAKIA^99DCT&quot;&gt;false&lt;/oral_hairy_leukoplakia&gt;
        &lt;pneumocystic_carinii_pneumonia openmrs_concept=&quot;882^PNEUMOCYSTIC CARINII PNEUMONIA^99DCT&quot;&gt;false&lt;/pneumocystic_carinii_pneumonia&gt;
        &lt;hiv_staging_-_mucocutaneous_herpes_simplex openmrs_concept=&quot;5344^HIV STAGING - MUCOCUTANEOUS HERPES SIMPLEX^99DCT&quot;&gt;false&lt;/hiv_staging_-_mucocutaneous_herpes_simplex&gt;
        &lt;hiv_staging_-_disseminated_endemic_mycosis openmrs_concept=&quot;5350^HIV STAGING - DISSEMINATED ENDEMIC MYCOSIS^99DCT&quot;&gt;false&lt;/hiv_staging_-_disseminated_endemic_mycosis&gt;
        &lt;hiv_staging_-_recurrent_upper_respiratory_infection openmrs_concept=&quot;5012^HIV STAGING - RECURRENT UPPER RESPIRATORY INFECTION^99DCT&quot;&gt;false&lt;/hiv_staging_-_recurrent_upper_respiratory_infection&gt;
        &lt;kaposi_apos_s_sarcoma openmrs_concept=&quot;507^KAPOSI&apos;S SARCOMA^99DCT&quot;&gt;false&lt;/kaposi_apos_s_sarcoma&gt;
        &lt;mycobacterium_tuberculosis_extrapulmonary openmrs_concept=&quot;5042^MYCOBACTERIUM TUBERCULOSIS, EXTRAPULMONARY^99DCT&quot;&gt;false&lt;/mycobacterium_tuberculosis_extrapulmonary&gt;
        &lt;hiv_staging_-_weight_loss_less_than_ten_percent openmrs_concept=&quot;5332^HIV STAGING - WEIGHT LOSS LESS THAN TEN PERCENT^99DCT&quot;&gt;false&lt;/hiv_staging_-_weight_loss_less_than_ten_percent&gt;
        &lt;hiv_staging_-_tuberculosis_within_year openmrs_concept=&quot;5338^HIV STAGING - TUBERCULOSIS WITHIN YEAR^99DCT&quot;&gt;false&lt;/hiv_staging_-_tuberculosis_within_year&gt;
        &lt;hiv_staging_-_cytomegalovirus_disease openmrs_concept=&quot;5035^HIV STAGING - CYTOMEGALOVIRUS DISEASE^99DCT&quot;&gt;false&lt;/hiv_staging_-_cytomegalovirus_disease&gt;
        &lt;hiv_staging_-_minor_mucocutaneous_manifestations openmrs_concept=&quot;5330^HIV STAGING - MINOR MUCOCUTANEOUS MANIFESTATIONS^99DCT&quot;&gt;false&lt;/hiv_staging_-_minor_mucocutaneous_manifestations&gt;
        &lt;hiv_staging_-_adult_herpes_zoster openmrs_concept=&quot;5329^HIV STAGING - ADULT HERPES ZOSTER^99DCT&quot;&gt;false&lt;/hiv_staging_-_adult_herpes_zoster&gt;
        &lt;hiv_staging_-_persistent_fever openmrs_concept=&quot;5027^HIV STAGING - PERSISTENT FEVER^99DCT&quot;&gt;false&lt;/hiv_staging_-_persistent_fever&gt;
        &lt;candidiasis_oral openmrs_concept=&quot;5334^CANDIDIASIS, ORAL^99DCT&quot;&gt;false&lt;/candidiasis_oral&gt;
    &lt;/adult_who_condition_query&gt;
    &lt;absolute_lymphocyte_count openmrs_concept=&quot;952^ABSOLUTE LYMPHOCYTE COUNT, AUTOMATED^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/absolute_lymphocyte_count&gt;
    &lt;cd4_count openmrs_concept=&quot;5497^CD4, BY FACS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_count&gt;
    &lt;cd4_percent openmrs_concept=&quot;730^CD4%, BY FACS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_percent&gt;
    &lt;cd8_count openmrs_concept=&quot;853^CD8, BY FACS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd8_count&gt;
    &lt;hemoglobin openmrs_concept=&quot;21^HEMOGLOBIN^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hemoglobin&gt;
    &lt;hiv_enzyme_immunoassay_qualitative multiple=&quot;0&quot; openmrs_concept=&quot;1042^HIV ENZYME IMMUNOASSAY, QUALITATIVE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_enzyme_immunoassay_qualitative&gt;
    &lt;hiv_enzyme_immunoassay_quantitative openmrs_concept=&quot;1041^HIV ENZYME IMMUNOASSAY, QUANTITATIVE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_enzyme_immunoassay_quantitative&gt;
    &lt;mean_corpuscular_volume openmrs_concept=&quot;851^MEAN CORPUSCULAR VOLUME^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/mean_corpuscular_volume&gt;
    &lt;platelets openmrs_concept=&quot;729^PLATELETS COUNT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/platelets&gt;
    &lt;serum_creatinine openmrs_concept=&quot;790^SERUM CREATININE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_creatinine&gt;
    &lt;serum_glutamic-pyruvic_transaminase openmrs_concept=&quot;654^SERUM GLUTAMIC-PYRUVIC TRANSAMINASE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glutamic-pyruvic_transaminase&gt;
    &lt;vdrl multiple=&quot;0&quot; openmrs_concept=&quot;299^SYPHILIS - VDRL, QUALITATIVE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/vdrl&gt;
    &lt;white_blood_cells openmrs_concept=&quot;678^WHITE BLOOD CELLS COUNT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/white_blood_cells&gt;
    &lt;x-ray_chest multiple=&quot;0&quot; openmrs_concept=&quot;12^X-RAY, CHEST^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/x-ray_chest&gt;
    &lt;hiv_viral_load openmrs_concept=&quot;856^HIV VIRAL LOAD, QUANTITATIVE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_viral_load&gt;
  &lt;/obs&gt;
  &lt;problem_list openmrs_concept=&quot;1284^PROBLEM LIST^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
    &lt;problem_added multiple=&quot;0&quot; openmrs_concept=&quot;6042^PROBLEM ADDED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_added&gt;
    &lt;problem_resolved multiple=&quot;0&quot; openmrs_concept=&quot;6097^PROBLEM RESOLVED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_resolved&gt;
  &lt;/problem_list&gt;
  &lt;orders&gt;
    &lt;medication_history openmrs_concept=&quot;1281^MEDICATION HISTORY^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;current_antiretroviral_drugs_used_for_transmission_prophylaxis multiple=&quot;1&quot; openmrs_concept=&quot;966^CURRENT ANTIRETROVIRAL DRUGS USED FOR TRANSMISSION PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;nelfinavir openmrs_concept=&quot;635^NELFINAVIR^99DCT&quot;&gt;false&lt;/nelfinavir&gt;
            &lt;other_antiretroviral_drug openmrs_concept=&quot;5424^OTHER ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/other_antiretroviral_drug&gt;
            &lt;efavirenz openmrs_concept=&quot;633^EFAVIRENZ^99DCT&quot;&gt;false&lt;/efavirenz&gt;
            &lt;lamivudine openmrs_concept=&quot;628^LAMIVUDINE^99DCT&quot;&gt;false&lt;/lamivudine&gt;
            &lt;abacavir openmrs_concept=&quot;814^ABACAVIR^99DCT&quot;&gt;false&lt;/abacavir&gt;
            &lt;stavudine openmrs_concept=&quot;625^STAVUDINE^99DCT&quot;&gt;false&lt;/stavudine&gt;
            &lt;nevirapine openmrs_concept=&quot;631^NEVIRAPINE^99DCT&quot;&gt;false&lt;/nevirapine&gt;
            &lt;zidovudine openmrs_concept=&quot;797^ZIDOVUDINE^99DCT&quot;&gt;false&lt;/zidovudine&gt;
            &lt;didanosine openmrs_concept=&quot;796^DIDANOSINE^99DCT&quot;&gt;false&lt;/didanosine&gt;
      &lt;/current_antiretroviral_drugs_used_for_transmission_prophylaxis&gt;
      &lt;current_antiretroviral_drugs_used_for_treatment multiple=&quot;1&quot; openmrs_concept=&quot;1088^CURRENT ANTIRETROVIRAL DRUGS USED FOR TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;zidovudine_and_lamivudine openmrs_concept=&quot;630^ZIDOVUDINE AND LAMIVUDINE^99DCT&quot;&gt;false&lt;/zidovudine_and_lamivudine&gt;
            &lt;d4t-40 openmrs_concept=&quot;625^STAVUDINE^99DCT^6^d4T-40^99RX&quot;&gt;false&lt;/d4t-40&gt;
            &lt;ddi_125 openmrs_concept=&quot;796^DIDANOSINE^99DCT^9^DDI 125^99RX&quot;&gt;false&lt;/ddi_125&gt;
            &lt;nevirapine openmrs_concept=&quot;631^NEVIRAPINE^99DCT&quot;&gt;false&lt;/nevirapine&gt;
            &lt;unknown_antiretroviral_drug openmrs_concept=&quot;5811^UNKNOWN ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/unknown_antiretroviral_drug&gt;
            &lt;lopinavir_and_ritonavir openmrs_concept=&quot;794^LOPINAVIR AND RITONAVIR^99DCT&quot;&gt;false&lt;/lopinavir_and_ritonavir&gt;
            &lt;d4t-30 openmrs_concept=&quot;625^STAVUDINE^99DCT^5^d4T-30^99RX&quot;&gt;false&lt;/d4t-30&gt;
            &lt;lamivudine_and_tenofovir openmrs_concept=&quot;1400^LAMIVUDINE AND TENOFOVIR^99DCT&quot;&gt;false&lt;/lamivudine_and_tenofovir&gt;
            &lt;indinavir openmrs_concept=&quot;749^INDINAVIR^99DCT&quot;&gt;false&lt;/indinavir&gt;
            &lt;triomune-40 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^3^Triomune-40^99RX&quot;&gt;false&lt;/triomune-40&gt;
            &lt;nelfinavir openmrs_concept=&quot;635^NELFINAVIR^99DCT&quot;&gt;false&lt;/nelfinavir&gt;
            &lt;didanosine openmrs_concept=&quot;796^DIDANOSINE^99DCT&quot;&gt;false&lt;/didanosine&gt;
            &lt;lamivudine openmrs_concept=&quot;628^LAMIVUDINE^99DCT&quot;&gt;false&lt;/lamivudine&gt;
            &lt;tenofovir openmrs_concept=&quot;802^TENOFOVIR^99DCT&quot;&gt;false&lt;/tenofovir&gt;
            &lt;zidovudine openmrs_concept=&quot;797^ZIDOVUDINE^99DCT&quot;&gt;false&lt;/zidovudine&gt;
            &lt;stavudine openmrs_concept=&quot;625^STAVUDINE^99DCT&quot;&gt;false&lt;/stavudine&gt;
            &lt;efavirenz openmrs_concept=&quot;633^EFAVIRENZ^99DCT&quot;&gt;false&lt;/efavirenz&gt;
            &lt;other_antiretroviral_drug openmrs_concept=&quot;5424^OTHER ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/other_antiretroviral_drug&gt;
            &lt;ddi_200 openmrs_concept=&quot;796^DIDANOSINE^99DCT^10^DDI 200^99RX&quot;&gt;false&lt;/ddi_200&gt;
            &lt;triomune-30 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^2^Triomune-30^99RX&quot;&gt;false&lt;/triomune-30&gt;
            &lt;abacavir openmrs_concept=&quot;814^ABACAVIR^99DCT&quot;&gt;false&lt;/abacavir&gt;
            &lt;stavudine_lamivudine_and_nevirapine openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT&quot;&gt;false&lt;/stavudine_lamivudine_and_nevirapine&gt;
      &lt;/current_antiretroviral_drugs_used_for_treatment&gt;
      &lt;previous_antiretroviral_drugs_used_for_transmission_prophylaxis multiple=&quot;1&quot; openmrs_concept=&quot;1086^PREVIOUS ANTIRETROVIRAL DRUGS USED FOR TRANSMISSION PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;abacavir openmrs_concept=&quot;814^ABACAVIR^99DCT&quot;&gt;false&lt;/abacavir&gt;
            &lt;lopinavir_and_ritonavir openmrs_concept=&quot;794^LOPINAVIR AND RITONAVIR^99DCT&quot;&gt;false&lt;/lopinavir_and_ritonavir&gt;
            &lt;nevirapine openmrs_concept=&quot;631^NEVIRAPINE^99DCT&quot;&gt;false&lt;/nevirapine&gt;
            &lt;unknown_antiretroviral_drug openmrs_concept=&quot;5811^UNKNOWN ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/unknown_antiretroviral_drug&gt;
            &lt;efavirenz openmrs_concept=&quot;633^EFAVIRENZ^99DCT&quot;&gt;false&lt;/efavirenz&gt;
            &lt;stavudine openmrs_concept=&quot;625^STAVUDINE^99DCT&quot;&gt;false&lt;/stavudine&gt;
            &lt;zidovudine openmrs_concept=&quot;797^ZIDOVUDINE^99DCT&quot;&gt;false&lt;/zidovudine&gt;
            &lt;didanosine openmrs_concept=&quot;796^DIDANOSINE^99DCT&quot;&gt;false&lt;/didanosine&gt;
            &lt;lamivudine openmrs_concept=&quot;628^LAMIVUDINE^99DCT&quot;&gt;false&lt;/lamivudine&gt;
            &lt;other_antiretroviral_drug openmrs_concept=&quot;5424^OTHER ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/other_antiretroviral_drug&gt;
            &lt;nelfinavir openmrs_concept=&quot;635^NELFINAVIR^99DCT&quot;&gt;false&lt;/nelfinavir&gt;
      &lt;/previous_antiretroviral_drugs_used_for_transmission_prophylaxis&gt;
      &lt;previous_antiretroviral_drugs_used_for_treatment multiple=&quot;1&quot; openmrs_concept=&quot;1087^PREVIOUS ANTIRETROVIRAL DRUGS USED FOR TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;unknown_antiretroviral_drug openmrs_concept=&quot;5811^UNKNOWN ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/unknown_antiretroviral_drug&gt;
            &lt;other_antiretroviral_drug openmrs_concept=&quot;5424^OTHER ANTIRETROVIRAL DRUG^99DCT&quot;&gt;false&lt;/other_antiretroviral_drug&gt;
            &lt;stavudine_lamivudine_and_nevirapine openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT&quot;&gt;false&lt;/stavudine_lamivudine_and_nevirapine&gt;
            &lt;nevirapine openmrs_concept=&quot;631^NEVIRAPINE^99DCT&quot;&gt;false&lt;/nevirapine&gt;
            &lt;zidovudine openmrs_concept=&quot;797^ZIDOVUDINE^99DCT&quot;&gt;false&lt;/zidovudine&gt;
            &lt;do_not_know openmrs_concept=&quot;1624^DO NOT KNOW^99DCT&quot;&gt;false&lt;/do_not_know&gt;
            &lt;efavirenz openmrs_concept=&quot;633^EFAVIRENZ^99DCT&quot;&gt;false&lt;/efavirenz&gt;
            &lt;nelfinavir openmrs_concept=&quot;635^NELFINAVIR^99DCT&quot;&gt;false&lt;/nelfinavir&gt;
            &lt;zidovudine_and_lamivudine openmrs_concept=&quot;630^ZIDOVUDINE AND LAMIVUDINE^99DCT&quot;&gt;false&lt;/zidovudine_and_lamivudine&gt;
            &lt;abacavir openmrs_concept=&quot;814^ABACAVIR^99DCT&quot;&gt;false&lt;/abacavir&gt;
            &lt;lamivudine openmrs_concept=&quot;628^LAMIVUDINE^99DCT&quot;&gt;false&lt;/lamivudine&gt;
            &lt;stavudine openmrs_concept=&quot;625^STAVUDINE^99DCT&quot;&gt;false&lt;/stavudine&gt;
            &lt;didanosine openmrs_concept=&quot;796^DIDANOSINE^99DCT&quot;&gt;false&lt;/didanosine&gt;
            &lt;lopinavir_and_ritonavir openmrs_concept=&quot;794^LOPINAVIR AND RITONAVIR^99DCT&quot;&gt;false&lt;/lopinavir_and_ritonavir&gt;
      &lt;/previous_antiretroviral_drugs_used_for_treatment&gt;
      &lt;patient_reported_current_cryptococcus_treatment multiple=&quot;0&quot; openmrs_concept=&quot;1112^PATIENT REPORTED CURRENT CRYPTOCOCCUS TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/patient_reported_current_cryptococcus_treatment&gt;
      &lt;patient_reported_current_pcp_prophylaxis multiple=&quot;0&quot; openmrs_concept=&quot;1109^PATIENT REPORTED CURRENT PCP PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/patient_reported_current_pcp_prophylaxis&gt;
      &lt;patient_reported_current_tuberculosis_prophylaxis multiple=&quot;0&quot; openmrs_concept=&quot;1110^PATIENT REPORTED CURRENT TUBERCULOSIS PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/patient_reported_current_tuberculosis_prophylaxis&gt;
      &lt;patient_reported_current_tuberculosis_treatment multiple=&quot;1&quot; openmrs_concept=&quot;1111^PATIENT REPORTED CURRENT TUBERCULOSIS TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;streptomycin openmrs_concept=&quot;438^STREPTOMYCIN^99DCT&quot;&gt;false&lt;/streptomycin&gt;
            &lt;ethambutol openmrs_concept=&quot;745^ETHAMBUTOL^99DCT&quot;&gt;false&lt;/ethambutol&gt;
            &lt;ethambutol_and_isonizaid openmrs_concept=&quot;1108^ETHAMBUTOL AND ISONIZAID^99DCT&quot;&gt;false&lt;/ethambutol_and_isonizaid&gt;
            &lt;isoniazid openmrs_concept=&quot;656^ISONIAZID^99DCT&quot;&gt;false&lt;/isoniazid&gt;
            &lt;rifampicin_isoniazid_pyrazinamide_and_ethambutol openmrs_concept=&quot;1131^RIFAMPICIN ISONIAZID PYRAZINAMIDE AND ETHAMBUTOL^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_pyrazinamide_and_ethambutol&gt;
            &lt;rifampicin_isoniazid_and_pyrazinamide openmrs_concept=&quot;768^RIFAMPICIN ISONIAZID AND PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_and_pyrazinamide&gt;
            &lt;pyrazinamide openmrs_concept=&quot;5829^PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/pyrazinamide&gt;
            &lt;rifampicin openmrs_concept=&quot;767^RIFAMPICIN^99DCT&quot;&gt;false&lt;/rifampicin&gt;
            &lt;rifampicin_and_isoniazid openmrs_concept=&quot;1194^RIFAMPICIN AND ISONIAZID^99DCT&quot;&gt;false&lt;/rifampicin_and_isoniazid&gt;
      &lt;/patient_reported_current_tuberculosis_treatment&gt;
    &lt;/medication_history&gt;
    &lt;medication_orders openmrs_concept=&quot;1282^MEDICATION ORDERS^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;antiretroviral_plan multiple=&quot;0&quot; openmrs_concept=&quot;1255^ANTIRETROVIRAL PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/antiretroviral_plan&gt;
      &lt;antiretrovirals_started multiple=&quot;1&quot; openmrs_concept=&quot;1250^ANTIRETROVIRALS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;efavirenz openmrs_concept=&quot;633^EFAVIRENZ^99DCT&quot;&gt;false&lt;/efavirenz&gt;
            &lt;triomune-40 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^3^Triomune-40^99RX&quot;&gt;false&lt;/triomune-40&gt;
            &lt;lamivudine openmrs_concept=&quot;628^LAMIVUDINE^99DCT&quot;&gt;false&lt;/lamivudine&gt;
            &lt;zidovudine openmrs_concept=&quot;797^ZIDOVUDINE^99DCT&quot;&gt;false&lt;/zidovudine&gt;
            &lt;stavudine openmrs_concept=&quot;625^STAVUDINE^99DCT&quot;&gt;false&lt;/stavudine&gt;
            &lt;triomune-30 openmrs_concept=&quot;792^STAVUDINE LAMIVUDINE AND NEVIRAPINE^99DCT^2^Triomune-30^99RX&quot;&gt;false&lt;/triomune-30&gt;
            &lt;lopinavir_and_ritonavir openmrs_concept=&quot;794^LOPINAVIR AND RITONAVIR^99DCT&quot;&gt;false&lt;/lopinavir_and_ritonavir&gt;
            &lt;d4t-30 openmrs_concept=&quot;625^STAVUDINE^99DCT^5^d4T-30^99RX&quot;&gt;false&lt;/d4t-30&gt;
            &lt;nelfinavir openmrs_concept=&quot;635^NELFINAVIR^99DCT&quot;&gt;false&lt;/nelfinavir&gt;
            &lt;ddi_200 openmrs_concept=&quot;796^DIDANOSINE^99DCT^10^DDI 200^99RX&quot;&gt;false&lt;/ddi_200&gt;
            &lt;lamivudine_and_tenofovir openmrs_concept=&quot;1400^LAMIVUDINE AND TENOFOVIR^99DCT&quot;&gt;false&lt;/lamivudine_and_tenofovir&gt;
            &lt;zidovudine_and_lamivudine openmrs_concept=&quot;630^ZIDOVUDINE AND LAMIVUDINE^99DCT&quot;&gt;false&lt;/zidovudine_and_lamivudine&gt;
            &lt;d4t-40 openmrs_concept=&quot;625^STAVUDINE^99DCT^6^d4T-40^99RX&quot;&gt;false&lt;/d4t-40&gt;
            &lt;tenofovir openmrs_concept=&quot;802^TENOFOVIR^99DCT&quot;&gt;false&lt;/tenofovir&gt;
            &lt;abacavir openmrs_concept=&quot;814^ABACAVIR^99DCT&quot;&gt;false&lt;/abacavir&gt;
            &lt;indinavir openmrs_concept=&quot;749^INDINAVIR^99DCT&quot;&gt;false&lt;/indinavir&gt;
            &lt;ddi_125 openmrs_concept=&quot;796^DIDANOSINE^99DCT^9^DDI 125^99RX&quot;&gt;false&lt;/ddi_125&gt;
            &lt;didanosine openmrs_concept=&quot;796^DIDANOSINE^99DCT&quot;&gt;false&lt;/didanosine&gt;
            &lt;nevirapine openmrs_concept=&quot;631^NEVIRAPINE^99DCT&quot;&gt;false&lt;/nevirapine&gt;
      &lt;/antiretrovirals_started&gt;
      &lt;pcp_prophylaxis_plan multiple=&quot;0&quot; openmrs_concept=&quot;1261^PCP PROPHYLAXIS PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/pcp_prophylaxis_plan&gt;
      &lt;pcp_prophylaxis_started multiple=&quot;1&quot; openmrs_concept=&quot;1263^PCP PROPHYLAXIS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;trimethoprim_and_sulfamethoxazole openmrs_concept=&quot;916^TRIMETHOPRIM AND SULFAMETHOXAZOLE^99DCT&quot;&gt;false&lt;/trimethoprim_and_sulfamethoxazole&gt;
            &lt;dapsone openmrs_concept=&quot;92^DAPSONE^99DCT&quot;&gt;false&lt;/dapsone&gt;
      &lt;/pcp_prophylaxis_started&gt;
      &lt;reason_antiretrovirals_started multiple=&quot;0&quot; openmrs_concept=&quot;1251^REASON ANTIRETROVIRALS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_antiretrovirals_started&gt;
      &lt;reason_antiretrovirals_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1252^REASON ANTIRETROVIRALS STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_antiretrovirals_stopped&gt;
      &lt;reason_pcp_prophylaxis_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1262^REASON PCP PROPHYLAXIS STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_pcp_prophylaxis_stopped&gt;
      &lt;reason_tuberculosis_treatment_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1269^REASON TUBERCULOSIS TREATMENT STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_tuberculosis_treatment_stopped&gt;
      &lt;tuberculosis_prophylaxis_plan multiple=&quot;0&quot; openmrs_concept=&quot;1265^TUBERCULOSIS PROPHYLAXIS PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/tuberculosis_prophylaxis_plan&gt;
      &lt;tuberculosis_prophylaxis_started multiple=&quot;1&quot; openmrs_concept=&quot;1264^TUBERCULOSIS PROPHYLAXIS STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;isoniazid openmrs_concept=&quot;656^ISONIAZID^99DCT&quot;&gt;false&lt;/isoniazid&gt;
      &lt;/tuberculosis_prophylaxis_started&gt;
      &lt;tuberculosis_treatment_plan multiple=&quot;0&quot; openmrs_concept=&quot;1268^TUBERCULOSIS TREATMENT PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/tuberculosis_treatment_plan&gt;
      &lt;tuberculosis_treatment_started multiple=&quot;1&quot; openmrs_concept=&quot;1270^TUBERCULOSIS TREATMENT STARTED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;rifampicin_isoniazid_and_pyrazinamide openmrs_concept=&quot;768^RIFAMPICIN ISONIAZID AND PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_and_pyrazinamide&gt;
            &lt;rifampicin openmrs_concept=&quot;767^RIFAMPICIN^99DCT&quot;&gt;false&lt;/rifampicin&gt;
            &lt;rifampicin_isoniazid_pyrazinamide_and_ethambutol openmrs_concept=&quot;1131^RIFAMPICIN ISONIAZID PYRAZINAMIDE AND ETHAMBUTOL^99DCT&quot;&gt;false&lt;/rifampicin_isoniazid_pyrazinamide_and_ethambutol&gt;
            &lt;rifampicin_and_isoniazid openmrs_concept=&quot;1194^RIFAMPICIN AND ISONIAZID^99DCT&quot;&gt;false&lt;/rifampicin_and_isoniazid&gt;
            &lt;streptomycin openmrs_concept=&quot;438^STREPTOMYCIN^99DCT&quot;&gt;false&lt;/streptomycin&gt;
            &lt;isoniazid openmrs_concept=&quot;656^ISONIAZID^99DCT&quot;&gt;false&lt;/isoniazid&gt;
            &lt;ethambutol_and_isonizaid openmrs_concept=&quot;1108^ETHAMBUTOL AND ISONIZAID^99DCT&quot;&gt;false&lt;/ethambutol_and_isonizaid&gt;
            &lt;ethambutol openmrs_concept=&quot;745^ETHAMBUTOL^99DCT&quot;&gt;false&lt;/ethambutol&gt;
            &lt;pyrazinamide openmrs_concept=&quot;5829^PYRAZINAMIDE^99DCT&quot;&gt;false&lt;/pyrazinamide&gt;
      &lt;/tuberculosis_treatment_started&gt;
      &lt;reason_tuberculosis_prophylaxis_stopped multiple=&quot;0&quot; openmrs_concept=&quot;1266^REASON TUBERCULOSIS PROPHYLAXIS STOPPED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/reason_tuberculosis_prophylaxis_stopped&gt;
    &lt;/medication_orders&gt;
    &lt;laboratory_orders openmrs_concept=&quot;1283^LABORATORY ORDERS^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;tests_ordered multiple=&quot;1&quot; openmrs_concept=&quot;1271^TESTS ORDERED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;sputum_for_acid_fast_bacilli openmrs_concept=&quot;307^SPUTUM FOR ACID FAST BACILLI^99DCT&quot;&gt;false&lt;/sputum_for_acid_fast_bacilli&gt;
            &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
            &lt;hiv_enzyme_immunoassay_qualitative openmrs_concept=&quot;1042^HIV ENZYME IMMUNOASSAY, QUALITATIVE^99DCT&quot;&gt;false&lt;/hiv_enzyme_immunoassay_qualitative&gt;
            &lt;serum_glutamic-oxaloacetic_transaminase openmrs_concept=&quot;653^SERUM GLUTAMIC-OXALOACETIC TRANSAMINASE^99DCT&quot;&gt;false&lt;/serum_glutamic-oxaloacetic_transaminase&gt;
            &lt;tuberculin_skin_test openmrs_concept=&quot;5475^TUBERCULIN SKIN TEST^99DCT&quot;&gt;false&lt;/tuberculin_skin_test&gt;
            &lt;serum_glutamic-pyruvic_transaminase openmrs_concept=&quot;654^SERUM GLUTAMIC-PYRUVIC TRANSAMINASE^99DCT&quot;&gt;false&lt;/serum_glutamic-pyruvic_transaminase&gt;
            &lt;hiv_dna_polymerase_chain_reaction_qualitative openmrs_concept=&quot;1030^HIV DNA POLYMERASE CHAIN REACTION, QUALITATIVE^99DCT&quot;&gt;false&lt;/hiv_dna_polymerase_chain_reaction_qualitative&gt;
            &lt;hemoglobin openmrs_concept=&quot;21^HEMOGLOBIN^99DCT&quot;&gt;false&lt;/hemoglobin&gt;
            &lt;syphilis_-_vdrl_qualitative openmrs_concept=&quot;299^SYPHILIS - VDRL, QUALITATIVE^99DCT&quot;&gt;false&lt;/syphilis_-_vdrl_qualitative&gt;
            &lt;cd4_panel openmrs_concept=&quot;657^CD4 PANEL^99DCT&quot;&gt;false&lt;/cd4_panel&gt;
            &lt;serum_creatinine openmrs_concept=&quot;790^SERUM CREATININE^99DCT&quot;&gt;false&lt;/serum_creatinine&gt;
            &lt;serum_electrolytes openmrs_concept=&quot;5473^SERUM ELECTROLYTES^99DCT&quot;&gt;false&lt;/serum_electrolytes&gt;
            &lt;complete_blood_count openmrs_concept=&quot;1019^COMPLETE BLOOD COUNT^99DCT&quot;&gt;false&lt;/complete_blood_count&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;x-ray_chest openmrs_concept=&quot;12^X-RAY, CHEST^99DCT&quot;&gt;false&lt;/x-ray_chest&gt;
            &lt;hiv_viral_load_quantitative openmrs_concept=&quot;856^HIV VIRAL LOAD, QUANTITATIVE^99DCT&quot;&gt;false&lt;/hiv_viral_load_quantitative&gt;
            &lt;urine_pregnancy_test_qualitative openmrs_concept=&quot;45^URINE PREGNANCY TEST, QUALITATIVE^99DCT&quot;&gt;false&lt;/urine_pregnancy_test_qualitative&gt;
      &lt;/tests_ordered&gt;
    &lt;/laboratory_orders&gt;
    &lt;services_ordered openmrs_concept=&quot;31^SERVICES ORDERED^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;referrals_ordered multiple=&quot;1&quot; openmrs_concept=&quot;1272^REFERRALS ORDERED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;counseling openmrs_concept=&quot;1582^COUNSELING^99DCT&quot;&gt;false&lt;/counseling&gt;
            &lt;adherence_counseling openmrs_concept=&quot;5488^ADHERENCE COUNSELING^99DCT&quot;&gt;false&lt;/adherence_counseling&gt;
            &lt;inpatient_care_or_hospitalization openmrs_concept=&quot;5485^INPATIENT CARE OR HOSPITALIZATION^99DCT&quot;&gt;false&lt;/inpatient_care_or_hospitalization&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;social_support_services openmrs_concept=&quot;5486^SOCIAL SUPPORT SERVICES^99DCT&quot;&gt;false&lt;/social_support_services&gt;
            &lt;nutritional_support openmrs_concept=&quot;5484^NUTRITIONAL SUPPORT^99DCT&quot;&gt;false&lt;/nutritional_support&gt;
            &lt;family_planning_services openmrs_concept=&quot;5483^FAMILY PLANNING SERVICES^99DCT&quot;&gt;false&lt;/family_planning_services&gt;
            &lt;mental_health_services openmrs_concept=&quot;5489^MENTAL HEALTH SERVICES^99DCT&quot;&gt;false&lt;/mental_health_services&gt;
            &lt;alcohol_counseling openmrs_concept=&quot;1288^ALCOHOL COUNSELING^99DCT&quot;&gt;false&lt;/alcohol_counseling&gt;
            &lt;social_work openmrs_concept=&quot;1580^SOCIAL WORK^99DCT&quot;&gt;false&lt;/social_work&gt;
            &lt;disclosure_counseling openmrs_concept=&quot;1167^DISCLOSURE COUNSELING^99DCT&quot;&gt;false&lt;/disclosure_counseling&gt;
            &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
            &lt;support_group openmrs_concept=&quot;1581^SUPPORT GROUP^99DCT&quot;&gt;false&lt;/support_group&gt;
            &lt;psychosocial_counseling openmrs_concept=&quot;5490^PSYCHOSOCIAL COUNSELING^99DCT&quot;&gt;false&lt;/psychosocial_counseling&gt;
            &lt;individual_adherence_counseling openmrs_concept=&quot;1687^INDIVIDUAL ADHERENCE COUNSELING^99DCT&quot;&gt;false&lt;/individual_adherence_counseling&gt;
            &lt;tuberculosis_treatment_or_dot_program openmrs_concept=&quot;5487^TUBERCULOSIS TREATMENT OR DOT PROGRAM^99DCT&quot;&gt;false&lt;/tuberculosis_treatment_or_dot_program&gt;
      &lt;/referrals_ordered&gt;
    &lt;/services_ordered&gt;
  &lt;/orders&gt;
  &lt;other/&gt;&lt;/form&gt;" xslt="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!--
OpenMRS FormEntry Form HL7 Translation

This XSLT is used to translate OpenMRS forms from XML into HL7 2.5 format

@author Burke Mamlin, MD
@author Ben Wolfe
@version 1.9.4

1.9.4 - add support for message uid (as HL7 control id) and transform of patient.health_center to Discharge to Location (PV1-37)
1.9.3 - fixed rounding error on timestamp (tenths of seconds getting rounded up, causing &quot;60&quot; seconds in some cases) 
1.9.2 - first generally useful version
--&gt;

&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot; xmlns:xdt=&quot;http://www.w3.org/2005/xpath-datatypes&quot;&gt;
	&lt;xsl:output method=&quot;text&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;no&quot;/&gt;

&lt;xsl:variable name=&quot;SENDING-APPLICATION&quot;&gt;FORMENTRY&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;SENDING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-APPLICATION&quot;&gt;HL7LISTENER&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;PATIENT-AUTHORITY&quot;&gt;&lt;/xsl:variable&gt; &lt;!-- leave blank for internal id, max 20 characters --&gt;
                                                       &lt;!-- for now, must match patient_identifier_type.name --&gt;
&lt;xsl:variable name=&quot;FORM-AUTHORITY&quot;&gt;AMRS.ELD.FORMID&lt;/xsl:variable&gt; &lt;!-- max 20 characters --&gt;

&lt;xsl:template match=&quot;/&quot;&gt;
	&lt;xsl:apply-templates /&gt;
&lt;/xsl:template&gt;

&lt;!-- Form template --&gt;
&lt;xsl:template match=&quot;form&quot;&gt;
	&lt;!-- MSH Header --&gt;
	&lt;xsl:text&gt;MSH|^~\&amp;amp;&lt;/xsl:text&gt;   &lt;!-- Message header, field separator, and encoding characters --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-3 Sending application --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-4 Sending facility --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-5 Receiving application --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-6 Receiving facility --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-7 Date/time message sent --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-8 Security --&gt;
	&lt;xsl:text&gt;|ORU^R01&lt;/xsl:text&gt;       &lt;!-- MSH-9 Message type ^ Event type (observation report unsolicited) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-10 Message control ID --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;header/uid&quot;&gt;
			&lt;xsl:value-of select=&quot;header/uid&quot; /&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;patient/patient.patient_id&quot; /&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|P&lt;/xsl:text&gt;             &lt;!-- MSH-11 Processing ID --&gt;
	&lt;xsl:text&gt;|2.5&lt;/xsl:text&gt;           &lt;!-- MSH-12 HL7 version --&gt;
	&lt;xsl:text&gt;|1&lt;/xsl:text&gt;             &lt;!-- MSH-13 Message sequence number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-14 Continuation Pointer --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-15 Accept Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-16 Application Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-17 Country Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-18 Character Set --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-19 Principal Language of Message --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-20 Alternate Character Set Handling Scheme --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-21 Message Profile Identifier --&gt;
	&lt;xsl:value-of select=&quot;@id&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;
	&lt;xsl:value-of select=&quot;$FORM-AUTHORITY&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;

	&lt;!-- PID header --&gt;
	&lt;xsl:text&gt;PID&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-1 Set ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-2 (deprecated) Patient ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-3 Patient Identifier List --&gt;
	&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
		&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.patient_id&quot; /&gt;
		&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
		&lt;xsl:with-param name=&quot;type&quot; select=&quot;L&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:if test=&quot;patient/patient.previous_mrn and string-length(patient/patient.previous_mrn) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.previous_mrn&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;PRIOR&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;!-- Additional patient identifiers --&gt;
	&lt;!-- This example is for an MTCT-PLUS identifier used in the AMPATH project in Kenya (skipped if not present) --&gt;
	&lt;xsl:if test=&quot;patient/patient.mtctplus_id and string-length(patient/patient.mtctplus_id) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.mtctplus_id&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;MTCTPLUS&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-4 (deprecated) Alternate patient ID --&gt;
	&lt;!-- PID-5 Patient name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- Family name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.family_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Given name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.given_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Middle name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.middle_name&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-6 Mother&apos;s maiden name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-7 Date/Time of Birth --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.date_of_birth&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
	&lt;!-- PV1 header --&gt;
	&lt;xsl:text&gt;PV1&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-1 Sub ID --&gt;
	&lt;xsl:text&gt;|O&lt;/xsl:text&gt;             &lt;!-- PV1-2 Patient class (O = outpatient) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-3 Patient location --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.location_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-4 Admission type (2 = return) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-5 Pre-Admin Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-6 Prior Patient Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-7 Attending Doctor --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.provider_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-8 Referring Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-9 Consulting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-10 Hospital Service --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-11 Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-12 Preadmin Test Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-13 Re-adminssion Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-14 Admit Source --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-15 Ambulatory Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-16 VIP Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-17 Admitting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-18 Patient Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-19 Visit Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-20 Financial Class --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-21 Charge Price Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-22 Courtesy Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-23 Credit Rating --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-24 Contract Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-25 Contract Effective Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-26 Contract Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-27 Contract Period --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-28 Interest Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-29 Transfer to Bad Debt Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-30 Transfer to Bad Debt Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Agency Code --&gt;
  &lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Transfer Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-33 Bad Debt Recovery Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-34 Delete Account Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-35 Delete Account Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-36 Discharge Disposition --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-37 Discharge To Location --&gt;
	&lt;xsl:if test=&quot;patient/patient.health_center&quot;&gt;
		&lt;xsl:value-of select=&quot;replace(patient/patient.health_center,&apos;\^&apos;,&apos;&amp;amp;&apos;)&quot; /&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-38 Diet Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-39 Servicing Facility --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-40 Bed Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-41 Account Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-42 Pending Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-43 Prior Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-44 Admit Date/Time --&gt;
	&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-45 Discharge Date/Time --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-46 Current Patient Balance --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-47 Total Charges --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-48 Total Adjustments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-49 Total Payments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-50 Alternate Visit ID --&gt;
	&lt;xsl:text&gt;|V&lt;/xsl:text&gt;             &lt;!-- PV1-51 Visit Indicator --&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- We use encounter date as the timestamp for each observation --&gt;
	&lt;xsl:variable name=&quot;encounterTimestamp&quot;&gt;
		&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
			&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:variable&gt;
	
	&lt;!-- ORC Common Order Segment --&gt;
	&lt;xsl:text&gt;ORC&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|RE&lt;/xsl:text&gt;            &lt;!-- ORC-1 Order Control (RE = obs to follow) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-2 Placer Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-3 Filler Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-4 Placer Group Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-5 Order Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-6 Response Flag --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-7 Quantity/Timing --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-8 Parent --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-9 Date/Time of Transaction --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:dateTime(header/date_entered)&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-10 Entered By --&gt;
	&lt;xsl:value-of select=&quot;header/enterer&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- Observation(s) --&gt;
	&lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsListCount&quot; select=&quot;count($obsList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;!-- Observation OBR --&gt;
	&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
	&lt;xsl:text&gt;1&lt;/xsl:text&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
	&lt;xsl:value-of select=&quot;obs/@openmrs_concept&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- observation OBXs --&gt;
	&lt;xsl:for-each select=&quot;$obsList&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;value&quot;&gt;
				&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
					&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
					&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
					&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
					&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
				&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat($setId,position())&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:for-each&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:for-each&gt;
	
	&lt;!-- Grouped observation(s) --&gt;
	&lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsGroupListCount&quot; select=&quot;count($obsGroupList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$obsGroupList&quot;&gt;
		&lt;!-- Observation OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + position()&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
		
		&lt;!-- Generate OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;1&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat(&apos;1.&apos;,position())&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;
	&lt;/xsl:for-each&gt;

	&lt;!-- Problem list(s) --&gt;
	&lt;xsl:variable name=&quot;problemList&quot; select=&quot;problem_list/*[value[text() != &apos;&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;problemListCount&quot; select=&quot;count($problemList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:if test=&quot;$problemList&quot;&gt;
		&lt;!-- Problem list OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;problem_list/@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

		&lt;!-- Problem list OBXs --&gt;
		&lt;xsl:for-each select=&quot;$problemList&quot;&gt;
			&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
				&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;&apos;CWE&apos;&quot; /&gt;
				&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
				&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
			&lt;/xsl:call-template&gt;		
		&lt;/xsl:for-each&gt;
	&lt;/xsl:if&gt;
	
	&lt;!-- Orders --&gt;
	&lt;xsl:variable name=&quot;orderList&quot; select=&quot;orders/*[*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]]&quot; /&gt;
	&lt;xsl:variable name=&quot;orderListCount&quot; select=&quot;count($orderList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$orderList&quot;&gt;
		&lt;!-- Order section OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + $problemListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
		&lt;!-- Order OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;position()&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;	
	&lt;/xsl:for-each&gt;
	
&lt;/xsl:template&gt;

&lt;!-- Patient Identifier (CX) generator --&gt;
&lt;xsl:template name=&quot;patient_id&quot;&gt;
	&lt;xsl:param name=&quot;pid&quot; /&gt;
	&lt;xsl:param name=&quot;auth&quot; /&gt;
	&lt;xsl:param name=&quot;type&quot; /&gt;
	&lt;xsl:value-of select=&quot;$pid&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check digit --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check Digit Scheme --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Assigning Authority --&gt;
	&lt;xsl:value-of select=&quot;$auth&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Identifier Type --&gt;
	&lt;xsl:value-of select=&quot;$type&quot; /&gt;
&lt;/xsl:template&gt;

&lt;!-- OBX Generator --&gt;
&lt;xsl:template name=&quot;obsObx&quot;&gt;
	&lt;xsl:param name=&quot;setId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;subId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;datatype&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;concept&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;date&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;time&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;value&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;units&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;encounterTimestamp&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:text&gt;OBX&lt;/xsl:text&gt;                     &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Set ID --&gt;
	&lt;xsl:value-of select=&quot;$setId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation datatype --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:text&gt;NM&lt;/xsl:text&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$datatype&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Concept (what was observed --&gt;
	&lt;xsl:value-of select=&quot;$concept&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Sub-ID --&gt;
	&lt;xsl:value-of select=&quot;$subId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Value --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TS&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;DT&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TM&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Time&quot;&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$value = &apos;0&apos; or upper-case($value) = &apos;FALSE&apos;&quot;&gt;0&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;1&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$value&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Units --&gt;
	&lt;xsl:value-of select=&quot;$units&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Reference range --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Abnormal flags --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Probability --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Nature of abnormal test --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation result status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Effective date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- User defined access checks --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Date time of observation --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$date and $time&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;dateTime($date,$time)&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$date&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$encounterTimestamp&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted timestamp --&gt;
&lt;xsl:template name=&quot;hl7Timestamp&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(year-from-dateTime($date),format-number(month-from-dateTime($date),&apos;00&apos;),format-number(day-from-dateTime($date),&apos;00&apos;),format-number(hours-from-dateTime($date),&apos;00&apos;),format-number(minutes-from-dateTime($date),&apos;00&apos;),format-number(floor(seconds-from-dateTime($date)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted date --&gt;
&lt;xsl:template name=&quot;hl7Date&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;contains(string($date),&apos;T&apos;)&quot;&gt;
				&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:date(substring-before($date,&apos;T&apos;))&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
					&lt;xsl:value-of select=&quot;concat(year-from-date($date),format-number(month-from-date($date),&apos;00&apos;),format-number(day-from-date($date),&apos;00&apos;))&quot; /&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;				
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted time --&gt;
&lt;xsl:template name=&quot;hl7Time&quot;&gt;
	&lt;xsl:param name=&quot;time&quot; /&gt;
	&lt;xsl:if test=&quot;$time != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(format-number(hours-from-time($time),&apos;00&apos;),format-number(minutes-from-time($time),&apos;00&apos;),format-number(floor(seconds-from-time($time)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;" creator="2" date_created="2005-08-07 00:00:00.0" changed_by="54709" date_changed="2007-10-24 14:51:53.0" retired="false" retired_reason=""/>
</dataset>
